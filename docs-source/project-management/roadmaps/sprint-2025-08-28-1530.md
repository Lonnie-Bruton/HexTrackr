# Sprint: Codacy Compliance & Documentation Review - 2025-08-28-1530

## Context for Resume

- **Current Branch**: copilot (Lonnie-Bruton/HexTrackr)
- **Last Completed**: ✅ Round 1 easy fixes: parseInt(base 10), CSS modernization, README lint
- **Next Steps**: Continue with low-risk mechanical fixes before security issues
- **Files Modified**: styles/utils/responsive.css, styles/pages/tickets.css, scripts/shared/settings-modal.js, README.md
- **Codacy Status**: **~245 ISSUES** (reduced from 249 after mechanical fixes)
- **Git Checkpoint**: 86b4f9e - checkpoint: mechanical fixes - parseInt base 10, CSS media queries,

  font-family quotes, README lint

## Current Status (IN PROGRESS)

- **Completed Fixes**: ✅ 2 unused variables, ✅ 3 parseInt improvements, ✅ CSS media query

  modernization, ✅ Font family quotes, ✅ README markdown lint, ✅ CSS trailing whitespace cleanup,
  ✅ kebab-case ID naming (deviceVulnGrid → device-vuln-grid)

- **Actual Issues**: ~240 total on copilot branch (estimated after recent fixes)
- **Critical**: 12 issues (server.js complexity, security issues)
- **High**: 40+ issues (XSS, file security, unknown stylelint rules)
- **Medium/Low**: Style, complexity, best practice issues
- **Git Checkpoints**: 86b4f9e (mechanical fixes), 007333d (CSS fixes)

## ROUND 1: Immediate Security & High-Impact Quick Wins (START HERE)

### Security Issues (CRITICAL - Fix First)

- [ ] **XSS - innerHTML Usage** (scripts/shared/settings-modal.js:488)
- [ ] **XSS - innerHTML Usage** (scripts/pages/tickets.js:2112)
- [ ] **XSS - innerHTML Usage** (scripts/shared/footer-loader.js:13)
- [ ] **XSS - HTML in replace** (scripts/generate-roadmap-portal.js:40,34)
- [ ] **File Security** (server.js:1078) - unlinkSync with non-literal path
- [ ] **File Security** (server.js:390) - readdirSync with non-literal path
- [ ] **File Security** (scripts/version-manager.js:36) - readFileSync with non-literal path

### Unused Variables (EASY WINS)

- [ ] **Fix**: `urlPreview` unused (scripts/shared/settings-modal.js:689)
- [ ] **Fix**: `htmlPath` unused (scripts/docs-repair-generator.js:21)

### Stylelint Configuration Issues (BULK FIXES)

- [ ] **Fix All**: Replace `scss_` prefixed rules with correct names:
  - `scss_declaration-property-value-no-unknown` → `declaration-property-value-no-unknown`
  - `scss_property-no-unknown` → `property-no-unknown`
  - `scss_function-disallowed-list` → `function-disallowed-list`
  - Remove: `no-outline-none` (unknown rule)
  - Remove: `no-display-none` (unknown rule)

### ParseInt Best Practices (QUICK)

- [ ] **Fix**: Add base 10 to parseInt calls (server.js:100,101)
- [ ] **Fix**: Add base 10 to parseInt calls (scripts/pages/tickets.js:272)

## ROUND 2: Style & Code Quality (Lower Priority)

### CSS Modern Notation Updates (Bulk Operations)

- [ ] **Alpha values**: Convert 0.1 → 10%, 0.05 → 5%, 0.25 → 25%
- [ ] **Color functions**: rgba() → modern color notation
- [ ] **Hex colors**: #00ff00 → #0f0 (shorthand)
- [ ] **Font families**: Remove unnecessary quotes around Consolas, Monaco
- [ ] **Declaration blocks**: Split single-line multi-declarations

### ID Selector Issues

- [ ] **Fix**: #vulnGrid → #vuln-grid (kebab-case)
- [ ] **Fix**: #deviceVulnGrid → #device-vuln-grid (kebab-case)

### Media Query Modernization

- [ ] **Fix**: Use modern range notation instead of max-width syntax
- [ ] **Fix**: Remove -webkit vendor prefixes where appropriate

## ROUND 3: Complex Issues (Dedicated Sessions)

### Critical Complexity Issues (MAJOR REFACTORS)

- [ ] **server.js** (1023 lines, complexity 42/49) - SPLIT INTO MODULES
- [ ] **scripts/pages/tickets.js** (1790 lines) - MAJOR REFACTOR NEEDED
- [ ] **scripts/ag-grid-responsive-config.js** - 173 lines, complexity 23
- [ ] **scripts/shared/settings-modal.js** (853 lines) - MODULARIZE

### Package & Dependency Issues

- [ ] **package-lock.json** - 4620 lines (consider regeneration)
- [ ] **SQL files** - Missing SET statements for production compliance

## Checklist Execution Strategy

### Phase 1: Security First (TODAY)

1. [ ] Start with XSS fixes - highest security impact
2. [ ] Fix file security issues in server.js and version-manager.js
3. [ ] Run Codacy analysis after each security fix
4. [ ] Git checkpoint after all security issues resolved

### Phase 2: Quick Wins (TODAY/TOMORROW)

1. [ ] Fix unused variables (2 files, 10 minutes)
2. [ ] Bulk fix stylelint configuration issues
3. [ ] Add base 10 to parseInt calls
4. [ ] Run Codacy analysis and git checkpoint

### Phase 3: Style Improvements (THIS WEEK)

1. [ ] CSS notation updates (can be automated)
2. [ ] ID selector naming fixes
3. [ ] Media query modernization
4. [ ] Final style cleanup round

### Phase 4: Major Refactors (SEPARATE SPRINT)

1. [ ] Break down server.js into modules
2. [ ] Refactor tickets.js into smaller components
3. [ ] Modularize settings-modal.js
4. [ ] Clean up ag-grid configuration

## Documentation Updates Required

- [ ] systeminfo.json: Update with security fixes and dependencies
- [ ] roadmap.md: Mark Round 1 fixes as complete
- [ ] codacy-compliance.md: Update metrics after each round
- [ ] security/README.md: Document XSS prevention measures implemented

## Git Strategy

- **Branch**: copilot (continue current work)
- **Checkpoints after**: Each security fix, end of each round
- **Final merge**: After Round 2 completion (aim for <50 issues)

## Codacy Impact

- **Round 1 Target**: 249 → ~200 issues (security + quick wins)
- **Round 2 Target**: 200 → ~50 issues (style + quality)
- **Round 3 Target**: 50 → <10 issues (complexity refactors)
- **Files to analyze**: Every edited file immediately
- **Critical fixes needed**: All security issues before any other work

## IMMEDIATE NEXT STEPS

1. **Start with security fixes** - XSS innerHTML usage
2. **Run `codacy_cli_analyze` after each file**
3. **Git checkpoint every 3-4 fixes**
4. **Update this sprint file with progress**
5. **New chat session after completing Round 1 security fixes**
