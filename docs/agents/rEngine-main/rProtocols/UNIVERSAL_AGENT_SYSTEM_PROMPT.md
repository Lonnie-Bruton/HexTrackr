# 🎯 UNIVERSAL AGENT SYSTEM PROMPT

**Version:** 2.0.0  
**Generated:** August 20, 2025  
**Purpose:** Master reference for ALL AI agents in rEngine ecosystem

## 🚨 MANDATORY AGENT BOOTSTRAP SEQUENCE

### **STEP 1: System Matrix Loading (REQUIRED)**

```
Load: rProtocols/system_matrix.json
Purpose: Complete system reference and health checks
Status: Auto-updated with every protocol change
```

### **STEP 2: Protocol Stack Verification (REQUIRED)**

```
Load: rProtocols/protocols.json  
Purpose: Current protocol execution order and status
Protocols: 23 active protocols in 6 execution tiers
```

### **STEP 3: MCP Tools Availability Check (REQUIRED)**

```
Server: rEngine MCP (configured in .vscode/settings.json)
Status: Active via github.copilot.chat.mcpServers
Tools: Enhanced memory sync, protocol management, system operations
```

### **STEP 4: Memory System Health (REQUIRED)**

```
Location: rMemory/rAgentMemories/
Thresholds: handoff.json/tasks.json (<6h), memory.json (<1h)
Auto-sync: Enhanced memory sync with write-through policy active
```

---

## 🎯 AGENT EXECUTION MATRIX

### **TIER 1: FOUNDATION (Execute First)**

1. **Memory Management** → Verify dual memory architecture active
2. **rEngine Startup** → Confirm core services operational  
3. **Enhanced Scribe** → Check continuous monitoring active

### **TIER 2: COORDINATION (Execute Second)**  

1. **Session Handoff** → Load active handoff context
2. **Rapid Context Recall** → Verify memory search functional
3. **Recall Prime Directive** → Confirm memory integrity

### **TIER 3: OPERATIONS (Execute Third)**

1. **Document Sweep** → Auto-documentation procedures
2. **Documentation Structure** → Directory organization standards
3. **File Cleanup** → Safe file management protocols

### **TIER 4: INTELLIGENCE (Execute Fourth)**

1. **AI Enhancement** → Multi-provider optimization
2. **Tools Registry** → MCP tool management
3. **Document Scribe** → Unified documentation system

### **TIER 5: SPECIALIZED (Execute Fifth)**

1. **Document Publication** → Output formatting standards
2. **Patch Notes** → Change documentation procedures
3. **Directory Cleanup** → Advanced file organization

---

## 🎯 AGENT RESPONSIBILITIES

### **CRITICAL (Every Agent Must)**

- ✅ **Protocol Compliance**: Check protocols before any major action
- ✅ **Memory Freshness**: Verify files are current (<6h threshold)
- ✅ **MCP Integration**: Use available tools when applicable
- ✅ **Handoff Procedures**: Document significant work for continuity

### **OPERATIONAL (Standard Practice)**

- ✅ **Clean Structure**: Maintain organized directory hierarchy
- ✅ **Documentation**: Record important changes in memory system
- ✅ **Error Handling**: Follow established fallback procedures
- ✅ **System Health**: Monitor and report status issues

---

## 🎯 SYSTEM HEALTH VERIFICATION

### **Quick Health Check Commands**

```bash

# Memory system freshness

node rEngine/enhanced-memory-sync.js

# Protocol registry status  

node rEngine/protocol-registry-manager.js

# System recall functionality

node rEngine/recall.js "system status"
```

### **Critical File Locations**

```
📄 System Matrix: rProtocols/system_matrix.json
📋 Protocol Index: rProtocols/protocols.json  
🔧 Tools Registry: rProtocols/ai_tools_registry.json
🧠 Memory System: rMemory/rAgentMemories/
⚙️  MCP Server: rEngine/index.js
🚀 Bootstrap: COPILOT_INSTRUCTIONS.md
```

---

## 🎯 AGENT DECISION TREE

### **When Starting New Session:**

1. Load system_matrix.json → Get complete system state
2. Check protocols.json → Verify protocol execution order
3. Verify MCP tools → Confirm enhanced capabilities available
4. Check memory freshness → Ensure current context
5. Load handoff context → Resume previous work if applicable

### **When Encountering Issues:**

1. Check protocol compliance → Reference rProtocols/
2. Verify system health → Run health check commands
3. Check memory sync status → Ensure files are current
4. Review error protocols → Follow established procedures
5. Document resolution → Update memory system

### **When Making Changes:**

1. Follow relevant protocols → Check execution tier requirements
2. Use MCP tools when available → Leverage enhanced capabilities
3. Update memory system → Maintain continuity for next agent
4. Document significant changes → Ensure handoff completeness
5. Verify system health → Confirm no negative impacts

---

## 🎯 EMERGENCY PROCEDURES

### **If Protocols Missing/Corrupted:**

1. Check archive/protocols-cleanup-* for backups
2. Reference git history for recovery
3. Use minimal safe operations until restored

### **If Memory System Stale:**

1. Run: `node rEngine/enhanced-memory-sync.js`
2. Check: memory file freshness validation
3. Force sync if needed with write-through policy

### **If MCP Tools Unavailable:**

1. Check: .vscode/settings.json configuration
2. Verify: rEngine/index.js server status
3. Fallback: Use direct file operations with extra caution

---

## 🎯 SUCCESS METRICS

### **Agent Effectiveness Indicators:**

- ✅ **Protocol Compliance**: All actions follow established procedures
- ✅ **Memory Currency**: Files always fresh and synchronized  
- ✅ **Tool Utilization**: MCP capabilities used when available
- ✅ **Documentation Quality**: Clear handoffs and status updates
- ✅ **System Health**: No degradation from agent actions

### **System Optimization Indicators:**

- ✅ **Reduced Redundancy**: No duplicate effort across agents
- ✅ **Enhanced Continuity**: Smooth handoffs between sessions
- ✅ **Improved Efficiency**: Faster problem resolution
- ✅ **Better Organization**: Maintained clean structure
- ✅ **Proactive Maintenance**: Issues caught and resolved early

---

**🎯 REMEMBER: This system is designed for EXCELLENCE. Every agent has instant access to complete system knowledge through the matrix. Use it!**
