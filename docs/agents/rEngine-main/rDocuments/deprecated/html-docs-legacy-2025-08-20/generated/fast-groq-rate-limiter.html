<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fast-groq-rate-limiter - StackTrackr Documentation</title>
    <style>
        :root {
            --rengine-primary: #667eea;
            --rengine-secondary: #764ba2;
            --rengine-accent: #495057;
            --rengine-accent-light: #6c757d;
            --status-success: #28a745;
            --status-warning: #ffc107;
            --status-danger: #dc3545;
            --status-info: #007acc;
            --text-primary: #333;
            --text-secondary: #666;
            --text-muted: #888;
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --border-color: #e1e4e8;
            --shadow-heavy: 0 20px 40px rgba(0,0,0,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: linear-gradient(135deg, var(--rengine-primary) 0%, var(--rengine-secondary) 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--bg-primary);
            border-radius: 15px;
            box-shadow: var(--shadow-heavy);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, var(--rengine-accent) 0%, var(--rengine-accent-light) 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header-icon {
            font-size: 3em;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header .subtitle {
            font-size: 1.1em;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .header .meta {
            font-size: 0.9em;
            opacity: 0.7;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .nav-bar {
            background: var(--bg-secondary);
            padding: 15px 30px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .nav-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .nav-link {
            padding: 8px 16px;
            background: var(--status-info);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .content {
            padding: 40px;
            max-width: none;
        }

        .content h1, .content h2, .content h3 { 
            color: var(--text-primary); 
            margin-top: 2em; 
            margin-bottom: 0.5em; 
        }
        .content h1 { font-size: 2em; border-bottom: 2px solid var(--rengine-primary); padding-bottom: 0.5em; }
        .content h2 { font-size: 1.5em; }
        .content h3 { font-size: 1.3em; }
        
        .content pre { 
            background: var(--bg-secondary); 
            padding: 1em; 
            border-radius: 5px; 
            overflow-x: auto; 
            margin: 1em 0;
            border: 1px solid var(--border-color);
        }
        
        .content code { 
            background: var(--bg-secondary); 
            padding: 0.2em 0.4em; 
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
        }
        
        .content blockquote {
            border-left: 4px solid var(--rengine-primary);
            margin: 1em 0;
            padding-left: 1em;
            color: var(--text-secondary);
            background: var(--bg-secondary);
            padding: 1em 1em 1em 2em;
            border-radius: 5px;
        }
        
        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1em 0;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            overflow: hidden;
        }
        
        .content th, .content td {
            border: 1px solid var(--border-color);
            padding: 0.75em;
            text-align: left;
        }
        
        .content th {
            background: var(--bg-secondary);
            font-weight: 600;
            color: var(--text-primary);
        }

        .content a {
            color: var(--status-info);
            text-decoration: none;
        }

        .content a:hover {
            text-decoration: underline;
        }

        .metadata {
            background: var(--bg-secondary);
            padding: 1em;
            border-radius: 5px;
            margin-bottom: 2em;
            font-size: 0.9em;
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }
        
        .footer {
            background: var(--bg-secondary);
            padding: 20px 30px;
            border-top: 1px solid var(--border-color);
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        .footer .branding {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .footer .system-name {
            font-weight: 600;
            color: var(--rengine-accent);
        }

        .footer .version {
            color: var(--text-muted);
            font-style: italic;
        }

        .footer .divider {
            color: var(--text-muted);
            opacity: 0.5;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                border-radius: 10px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 20px;
            }
            
            .nav-bar {
                padding: 10px 20px;
            }
            
            .footer .branding {
                flex-direction: column;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-icon">üìÑ</div>
            <h1>fast-groq-rate-limiter</h1>
            <div class="subtitle">StackTrackr Documentation</div>
            <div class="meta">
                <span>üìÅ fast-groq-rate-limiter.md</span>
                <span>üìÖ 2025-08-20</span>
                
            </div>
        </header>
        
        <nav class="nav-bar">
            <div class="nav-links">
                <a href="../../html-docs/documentation.html" class="nav-link">üè† Documentation Portal</a>
                <a href="../index.html" class="nav-link">üìö All Docs</a>
                <a href="../../html-docs/developmentstatus.html" class="nav-link">üìä Development Status</a>
            </div>
        </nav>
        
        <main class="content">
            <div class="metadata">
                <strong>üìÇ Source File:</strong> fast-groq-rate-limiter.md | 
                <strong>üïí Generated:</strong> 8/19/2025, 9:47:44 PM |
                <strong>üé® Engine:</strong> Gemini HTML Converter
            </div>
            ```html
<h1>Fast Groq Rate Limiter</h1>

<h2>Purpose & Overview</h2>

<p>The <code>fast-groq-rate-limiter.js</code> script provides an optimized and efficient rate limiter for the Groq query language. It is designed to handle a high volume of requests with minimal delays and aggressive rate limiting, ensuring Groq's high performance is maintained.</p>

<p>This rate limiter is particularly useful in scenarios where you need to interact with Groq-powered APIs and need to ensure your application stays within the specified rate limits. By using this limiter, you can avoid rate limit errors and handle retries in a controlled manner, leading to a more reliable and responsive application.</p>

<h2>Technical Architecture</h2>

<p>The <code>FastGroqRateLimiter</code> class is the core component of this script. It uses a simple sliding window approach to track the number of requests made within a specific time frame (1 minute and 1 hour). The class has the following key components:</p>

<ol>
  <li><strong>Request Tracking</strong>: The <code>requestTimes</code> array keeps track of the timestamps of all requests made. Old requests are periodically cleaned up to maintain the sliding window.</li>
  <li><strong>Request Queue</strong>: The <code>queue</code> array stores pending requests that are waiting to be executed.</li>
  <li><strong>Execution Control</strong>: The <code>isProcessing</code> flag is used to ensure that only one instance of the queue processing is active at a time.</li>
  <li><strong>Rate Limit Checking</strong>: The <code>canMakeRequest()</code> method checks if the current request can be executed based on the configured rate limits.</li>
  <li><strong>Request Execution</strong>: The <code>executeRequest()</code> method is responsible for executing a single request, recording its success, and handling any errors.</li>
  <li><strong>Error Handling</strong>: The <code>handleError()</code> method determines if a request should be retried based on the error type and the configured maximum retries.</li>
  <li><strong>Delay Calculation</strong>: The <code>calculateDelay()</code> method calculates the appropriate delay time for retrying a request, with different logic for rate limit errors and other errors.</li>
</ol>

<h2>Dependencies</h2>

<p>This script imports the following dependencies:</p>

<ul>
  <li><code>fs-extra</code>: A file system library with additional functionality beyond the built-in <code>fs</code> module.</li>
  <li><code>path</code>: The built-in path manipulation module.</li>
</ul>

<h2>Key Functions/Classes</h2>

<h3><code>FastGroqRateLimiter</code> Class</h3>

<p>The <code>FastGroqRateLimiter</code> class is the main component of this script. It provides the following methods:</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Parameters</th>
      <th>Return Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>constructor(options)</code></td>
      <td><code>options</code> (optional) - An object with configuration options</td>
      <td>N/A</td>
      <td>Initializes the rate limiter with the provided options or default values.</td>
    </tr>
    <tr>
      <td><code>canMakeRequest()</code></td>
      <td>N/A</td>
      <td><code>boolean</code></td>
      <td>Checks if the current request can be executed based on the configured rate limits.</td>
    </tr>
    <tr>
      <td><code>request(fn, id)</code></td>
      <td><code>fn</code> - The function to be executed<br><code>id</code> (optional) - A unique identifier for the request</td>
      <td><code>Promise</code></td>
      <td>Adds a new request to the queue and processes the queue.</td>
    </tr>
    <tr>
      <td><code>processQueue()</code></td>
      <td>N/A</td>
      <td>N/A</td>
      <td>Processes the request queue, executing requests that are within the rate limits.</td>
    </tr>
    <tr>
      <td><code>executeRequest(request)</code></td>
      <td><code>request</code> - An object representing the request to be executed</td>
      <td>N/A</td>
      <td>Executes a single request, records its success, and handles any errors.</td>
    </tr>
    <tr>
      <td><code>handleError(request, error)</code></td>
      <td><code>request</code> - The request object<br><code>error</code> - The error that occurred</td>
      <td>N/A</td>
      <td>Determines if a request should be retried and handles the error accordingly.</td>
    </tr>
    <tr>
      <td><code>isRateLimitError(error)</code></td>
      <td><code>error</code> - The error object</td>
      <td><code>boolean</code></td>
      <td>Checks if the error is a rate limit error.</td>
    </tr>
    <tr>
      <td><code>isRetryableError(error)</code></td>
      <td><code>error</code> - The error object</td>
      <td><code>boolean</code></td>
      <td>Checks if the error is a retryable error.</td>
    </tr>
    <tr>
      <td><code>calculateDelay(attempt, isRateLimit)</code></td>
      <td><code>attempt</code> - The number of attempts for the request<br><code>isRateLimit</code> (optional) - Whether the error is a rate limit error</td>
      <td><code>number</code></td>
      <td>Calculates the appropriate delay time for retrying a request.</td>
    </tr>
    <tr>
      <td><code>getStats()</code></td>
      <td>N/A</td>
      <td><code>Object</code></td>
      <td>Returns statistics about the rate limiter's current state.</td>
    </tr>
  </tbody>
</table>

<h2>Usage Examples</h2>

<p>Here's an example of how to use the <code>FastGroqRateLimiter</code> in your application:</p>

<pre><code class="language-javascript">
import FastGroqRateLimiter from './fast-groq-rate-limiter';

const limiter = new FastGroqRateLimiter({
  name: 'my-groq-app',
  maxRequestsPerMinute: 30,
  maxRequestsPerHour: 1000,
  maxRetries: 3,
  baseDelay: 500,
  maxDelay: 5000
});

async function fetchData() {
  try {
    const result = await limiter.request(async () => {
      // Your Groq query code here
      const data = await fetchFromGroq();
      return data;
    });
    console.log(result);
  } catch (error) {
    console.error('Error fetching data:', error);
  }
}

fetchData();
</code></pre>

<h2>Configuration</h2>

<p>The <code>FastGroqRateLimiter</code> class accepts the following configuration options in the constructor:</p>

<table>
  <thead>
    <tr>
      <th>Option</th>
      <th>Type</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>name</code></td>
      <td><code>string</code></td>
      <td><code>'groq-fast'</code></td>
      <td>The name of the rate limiter, used for logging purposes.</td>
    </tr>
    <tr>
      <td><code>maxRequestsPerMinute</code></td>
      <td><code>number</code></td>
      <td><code>25</code></td>
      <td>The maximum number of requests allowed per minute.</td>
    </tr>
    <tr>
      <td><code>maxRequestsPerHour</code></td>
      <td><code>number</code></td>
      <td><code>900</code></td>
      <td>The maximum number of requests allowed per hour.</td>
    </tr>
    <tr>
      <td><code>maxRetries</code></td>
      <td><code>number</code></td>
      <td><code>2</code></td>
      <td>The maximum number of retries for a failed request.</td>
    </tr>
    <tr>
      <td><code>baseDelay</code></td>
      <td><code>number</code></td>
      <td><code>200</code></td>
      <td>The base delay (in milliseconds) for retrying a request.</td>
    </tr>
    <tr>
      <td><code>maxDelay</code></td>
      <td><code>number</code></td>
      <td><code>2000</code></td>
      <td>The maximum delay (in milliseconds) for retrying a request.</td>
    </tr>
  </tbody>
</table>

<h2>Error Handling</h2>

<p>The <code>FastGroqRateLimiter</code> class handles two types of errors:</p>

<ol>
  <li><strong>Rate Limit Errors</strong>: Errors related to rate limiting, such as HTTP status codes 429 (Too Many Requests) or 503 (Service Unavailable), or error messages containing keywords like "rate limit" or "quota".</li>
  <li><strong>Retryable Errors</strong>: Other errors, such as server errors (HTTP status codes 500+) or rate limit errors, that can be retried.</li>
</ol>

<p>When an error occurs, the <code>handleError()</code> method is called, which determines if the request should be retried based on the error type and the configured maximum retries. If the request can be retried, the method calculates the appropriate delay time and schedules the request to be retried. If the maximum number of retries has been reached, the error is propagated to the original caller.</p>

<h2>Integration</h2>

<p>The <code>FastGroqRateLimiter</code> class is designed to be easily integrated into your application's Groq-related functionality. By wrapping your Groq requests with the <code>request()</code> method, you can ensure that your application stays within the configured rate limits and handles retries gracefully.</p>

<h2>Development Notes</h2>

<ul>
  <li>The rate limiter uses a simple sliding window approach to track the number of requests, which is efficient and easy to implement.</li>
  <li>The <code>calculateDelay()</code> method uses different logic for rate limit errors and other errors to optimize the delay times.</li>
  <li>The <code>isProcessing</code> flag is used to ensure that only one instance of the queue processing is active at a time, preventing race conditions.</li>
  <li>The <code>getStats()</code> method provides useful information about the rate limiter's current state, which can be helpful for monitoring and debugging purposes.</li>
</ul>

<p>Overall, this <code>FastGroqRateLimiter</code> script provides a robust and efficient solution for managing rate limits in Groq-powered applications, helping to ensure high availability and performance.</p>
```
        </main>
        
        <footer class="footer">
            <div class="branding">
                <span>Generated from the <span class="system-name">rScribe Document System</span></span>
                <span class="divider">‚Ä¢</span>
                <span class="system-name">rEngine</span> <span class="version">(v2.1.0)</span>
                <span class="divider">‚Ä¢</span>
                <span>Last updated: 2025-08-20</span>
            </div>
        </footer>
    </div>
</body>
</html>