# gemini-html-converter.js - Combined Documentation

> **Note**: This file was too large for single analysis and was processed in 2 chunks.
> Successfully processed: 2/2 chunks.

## File Overview

This documentation was generated by analyzing the file in chunks due to size limitations.

## Chunk 1 Analysis

# Gemini HTML Converter

## Purpose & Overview

The `gemini-html-converter.js` script is a utility that converts Markdown (MD) files to high-quality HTML documentation using the Gemini language model. It operates on the `docs/generated/` directory and outputs the generated HTML files to the `html-docs/generated/` directory.

This script is part of the larger `rScribe Document System` and `rEngine` framework, which provides a comprehensive documentation generation and management solution for software projects.

## Technical Architecture

The script is structured as a standalone `GeminiHTMLConverter` class with the following key components:

1. **Initialization**: The constructor sets up the necessary configuration, including the Gemini API key, source and output directories, and API endpoint.
2. **HTML Template Generation**: The `getHTMLTemplate()` method generates a unified HTML template with branding and styling for the documentation pages.
3. **Markdown File Discovery**: The `findMarkdownFiles()` method recursively searches the source directory for all Markdown files.
4. **Markdown to HTML Conversion**: The `convertWithGemini()` method uses the Gemini API to convert the Markdown content to well-formatted HTML.
5. **File Generation**: The `generateHTML()` method orchestrates the overall process of finding Markdown files, converting them to HTML, and writing the output files.

The script uses the following external dependencies:

- `fs-extra`: For file system operations
- `path`: For working with file paths
- `axios`: For making HTTP requests to the Gemini API
- `dotenv`: For loading environment variables from a `.env` file
- `marked`: For basic Markdown to HTML conversion (as a fallback)

## Key Functions/Classes

### `GeminiHTMLConverter` Class

This is the main class that encapsulates the Gemini HTML conversion logic.

## Constructor

- **Parameters**: None
- **Returns**: A new instance of the `GeminiHTMLConverter` class

**`getHTMLTemplate(title, content, relativePath, metadata = {})`**

- **Purpose**: Generates a unified HTML template with branding and styling for the documentation pages.
- **Parameters**:
  - `title`: The title of the documentation page
  - `content`: The HTML content to be inserted into the template
  - `relativePath`: The relative path of the source Markdown file
  - `metadata`: (Optional) An object containing additional metadata about the page (e.g., category)
- **Returns**: The complete HTML document as a string

## `findMarkdownFiles()`

- **Purpose**: Recursively searches the source directory for all Markdown files.
- **Parameters**: None
- **Returns**: An array of objects, each representing a Markdown file with its full path, relative path, and filename.

**`convertWithGemini(markdownContent, title, relativePath)`**

- **Purpose**: Converts the provided Markdown content to HTML using the Gemini API.
- **Parameters**:
  - `markdownContent`: The Markdown content to be converted
  - `title`: The title of the documentation page
  - `relativePath`: The relative path of the source Markdown file
- **Returns**: The generated HTML content as a string

## Usage Examples

To use the `GeminiHTMLConverter`, you can create an instance of the class and call the `generateHTML()` method:

```javascript
const converter = new GeminiHTMLConverter();
await converter.generateHTML();
```

This will convert all Markdown files in the `docs/generated/` directory to HTML and save the output in the `html-docs/generated/` directory.

## Configuration

The script requires the following configuration:

- **`GEMINI_API_KEY`**: The API key for the Gemini language model, which must be provided in a `.env` file.

## Error Handling

The script handles the following errors:

- If the `GEMINI_API_KEY` is not found in the `.env` file, the script will exit with an error message.
- If there are any issues with the Gemini API response, the script will fallback to using the `marked` library for basic Markdown to HTML conversion.

## Integration

The `GeminiHTMLConverter` is designed to be integrated into the larger `rScribe Document System` and `rEngine` framework, which provides a comprehensive documentation generation and management solution for software projects.

## Development Notes

- The HTML template used in this script is designed to be consistent with the branding and styling of the `rEngine` system.
- The script uses the Gemini API for advanced Markdown to HTML conversion, but also includes a fallback to the `marked` library in case of any issues with the Gemini response.
- The script is designed to be highly configurable, with the source and output directories, as well as the Gemini API key, being set in the constructor.

---

## Chunk 2 Analysis

# Gemini HTML Converter (2)

## Purpose & Overview (2)

The `GeminiHTMLConverter` script is a powerful tool that converts Markdown files to HTML pages. It leverages the Gemini API to perform the conversion, providing a high-quality output. In the event that the Gemini API is unavailable or the conversion fails, the script falls back to using the `marked.js` library as a backup.

This script is particularly useful for projects that generate technical documentation, blog posts, or other content in Markdown format, and need to convert it to a more easily consumable HTML format for web publication.

## Technical Architecture (2)

The `GeminiHTMLConverter` class is the central component of this script. It contains the following key methods:

1. `convertWithGemini(markdownContent, title, relativePath)`: This method takes Markdown content, a title, and a relative file path, and uses the Gemini API to convert the Markdown to HTML. If the Gemini API call fails, it falls back to using the `marked.js` library.

1. `convertFile(file)`: This method converts a single Markdown file to HTML. It reads the Markdown content, converts it using `convertWithGemini()`, and then generates a full HTML page template with the converted content. The HTML file is then saved to the output directory.

1. `convertAll()`: This method scans the source directory for all Markdown files, converts them to HTML using `convertFile()`, and saves the resulting HTML files to the output directory.

1. `convertPattern(pattern)`: This method allows you to convert a subset of Markdown files that match a specific pattern in their file name or relative path.

The script also includes a `main()` function that handles the command-line execution of the script, allowing you to convert all files or a specific pattern.

## Dependencies

The `GeminiHTMLConverter` class relies on the following external dependencies:

- `fs-extra`: A file system library that provides additional functionality over the built-in `fs` module.
- `path`: The Node.js built-in path module, used for working with file and directory paths.
- `axios`: A popular HTTP client library used to make the API request to the Gemini service.
- `marked`: A Markdown-to-HTML conversion library, used as a fallback when the Gemini API is unavailable.

## Key Functions/Classes (2)

### `GeminiHTMLConverter` Class (2)

**Constructor**:

- `constructor(sourceDir, outputDir)`
  - `sourceDir`: The directory containing the Markdown files to be converted.
  - `outputDir`: The directory where the generated HTML files will be saved.

**Methods**:

1. `convertWithGemini(markdownContent, title, relativePath)`:
   - **Parameters**:
     - `markdownContent`: The Markdown content to be converted.
     - `title`: The title of the Markdown file.
     - `relativePath`: The relative file path of the Markdown file.
   - **Return Value**: The converted HTML content, or throws an error if the conversion fails.

1. `convertFile(file)`:
   - **Parameters**:
     - `file`: An object representing a Markdown file, with properties `fullPath`, `relativePath`, `name`.
   - **Return Value**: None, but it saves the converted HTML file to the output directory.

1. `convertAll()`:
   - **Parameters**: None.
   - **Return Value**: None, but it converts all Markdown files in the source directory and saves the HTML files to the output directory.

1. `convertPattern(pattern)`:
   - **Parameters**:
     - `pattern`: A string representing a pattern to match against the Markdown file names or relative paths.
   - **Return Value**: None, but it converts the Markdown files that match the specified pattern and saves the HTML files to the output directory.

## Usage Examples (2)

1. **Convert all Markdown files**:

```bash
node gemini-html-converter.js
```

1. **Convert Markdown files matching a pattern**:

```bash
node gemini-html-converter.js "my-article"
```

This will convert all Markdown files that have "my-article" in their file name or relative path.

## Configuration (2)

The `GeminiHTMLConverter` class has the following configuration options:

1. `sourceDir`: The directory containing the Markdown files to be converted.
2. `outputDir`: The directory where the generated HTML files will be saved.

These options are passed to the constructor when creating a new instance of the `GeminiHTMLConverter` class.

## Error Handling (2)

The `GeminiHTMLConverter` class handles errors in the following ways:

1. **Gemini API Conversion Failure**: If the Gemini API call fails for any reason, the script logs a warning message and falls back to using the `marked.js` library for the conversion.
2. **File Reading/Writing Errors**: If there are any errors reading the Markdown files or writing the HTML files, the script logs an error message and continues to the next file.
3. **Metadata Reading Errors**: If the script fails to read the metadata JSON file for a Markdown file, it logs a warning message and continues without the metadata.

## Integration (2)

The `GeminiHTMLConverter` script is designed to be a standalone utility that can be integrated into various project workflows. It can be used as part of a build process, a deployment pipeline, or even as a standalone script to convert Markdown files to HTML.

The script can be easily incorporated into other Node.js projects by importing the `GeminiHTMLConverter` class and using it in the appropriate part of the application.

## Development Notes (2)

1. **Gemini API Limits**: The script includes a 1-second delay between each Gemini API call to respect the service's rate limits.
2. **Metadata Integration**: The script reads optional JSON metadata files alongside the Markdown files and includes this information in the generated HTML pages.
3. **Fallback to `marked.js`**: The script uses the `marked.js` library as a fallback when the Gemini API is unavailable or the conversion fails. This ensures that the script can always generate HTML output, even if the primary conversion method is not working.
4. **Modular Design**: The `GeminiHTMLConverter` class is designed to be modular and extensible, allowing for easy integration into other projects and potential future enhancements.

---

## Processing Summary

- **Total Chunks**: 2
- **Successful**: 2
- **Failed**: 0
- **Processing Method**: Smart chunking with rate limiting
- **Generated**: 2025-08-20T00:51:25.611Z
