<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent Self-Management Protocol - StackTrackr Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #28a745 0%, #198754 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header-icon {
            font-size: 3em;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header .subtitle {
            font-size: 1.1em;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .header .meta {
            font-size: 0.9em;
            opacity: 0.7;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .nav-bar {
            background: #f8f9fa;
            padding: 15px 30px;
            border-bottom: 1px solid #e1e4e8;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .nav-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .nav-link {
            padding: 8px 16px;
            background: #007acc;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .content {
            padding: 40px;
            max-width: none;
        }

        .content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
            color: #2c3e50;
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .content h1 { font-size: 2.2em; border-bottom: 3px solid #007acc; padding-bottom: 10px; }
        .content h2 { font-size: 1.8em; color: #007acc; }
        .content h3 { font-size: 1.4em; color: #495057; }
        .content h4 { font-size: 1.2em; color: #6c757d; }

        .content p {
            margin-bottom: 16px;
            line-height: 1.7;
            color: #444;
        }

        .content ul, .content ol {
            margin-bottom: 16px;
            padding-left: 25px;
        }

        .content li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .content blockquote {
            border-left: 4px solid #007acc;
            background: #f8f9fa;
            margin: 20px 0;
            padding: 15px 20px;
            border-radius: 0 6px 6px 0;
        }

        .content code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            color: #e83e8c;
        }

        .content pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .content pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .content th, .content td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e1e4e8;
        }

        .content th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .content tr:hover {
            background: #f8f9fa;
        }

        .content a {
            color: #007acc;
            text-decoration: none;
            font-weight: 500;
        }

        .content a:hover {
            color: #0056b3;
            text-decoration: underline;
        }

        .footer {
            background: #f8f9fa;
            padding: 20px 30px;
            border-top: 1px solid #e1e4e8;
            text-align: center;
            color: #6c757d;
            font-size: 0.9em;
        }

        .doc-meta {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #007acc;
        }

        .doc-meta h3 {
            color: #007acc;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .meta-item {
            background: white;
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
        }

        .meta-label {
            font-weight: 600;
            color: #495057;
            font-size: 0.9em;
        }

        .meta-value {
            color: #6c757d;
            font-size: 0.9em;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .content { padding: 20px; }
            .header { padding: 20px; }
            .nav-bar { padding: 15px 20px; }
            .nav-links { justify-content: center; }
            .header .meta { flex-direction: column; gap: 10px; }
        }

        /* Category-specific colors */
        .color-vision { --primary: #9c27b0; --secondary: #7b1fa2; }
        .color-roadmap { --primary: #007acc; --secondary: #0056b3; }
        .color-engine { --primary: #2c3e50; --secondary: #34495e; }
        .color-agent { --primary: #28a745; --secondary: #198754; }
        .color-brain { --primary: #6f42c1; --secondary: #495057; }
        .color-docker { --primary: #0db7ed; --secondary: #086dd7; }
        .color-mobile { --primary: #fd7e14; --secondary: #dc3545; }
        .color-protocol { --primary: #20c997; --secondary: #198754; }
        .color-scribe { --primary: #17a2b8; --secondary: #138496; }
        .color-groq { --primary: #ffc107; --secondary: #e0a800; }
        .color-task { --primary: #dc3545; --secondary: #c82333; }
        .color-cleanup { --primary: #6c757d; --secondary: #5a6268; }
        .color-quickstart { --primary: #28a745; --secondary: #198754; }
        .color-patch { --primary: #ff6b35; --secondary: #e55a32; }
        .color-rengine { --primary: #8b5cf6; --secondary: #7c3aed; }
        .color-default { --primary: #495057; --secondary: #6c757d; }
    </style>
</head>
<body class="color-agent">
    <div class="container">
        <header class="header">
            <div class="header-icon">ü§ñ</div>
            <h1>Agent Self-Management Protocol</h1>
            <div class="subtitle">Agent System</div>
            <div class="meta">
                <span>üìÅ agent-self-management.md</span>
                <span>üìÖ 2025-08-20</span>
                <span>üìä 7KB</span>
            </div>
        </header>

        <nav class="nav-bar">
            <div class="nav-links">
                <a href="../index.html" class="nav-link">üè† Documentation Home</a>
                <a href="../developmentstatus.html" class="nav-link">üìä Development Status</a>
                <a href="../generated/agent-self-management.md" class="nav-link">üìù View Source MD</a>
                <a href="../json/agent-self-management.json" class="nav-link">üîß JSON Data</a>
            </div>
        </nav>

        <main class="content">
            <h1 id="agent-self-management-protocol">Agent Self-Management Protocol</h1>
<h2 id="purpose--overview">Purpose &amp; Overview</h2>
<p>The <code>agent-self-management.js</code> script is responsible for ensuring that agents follow memory contribution protocols and maintain the integrity of the system&#39;s memory and code repository. This script should be run by every agent at startup and task completion to perform the following key functions:</p>
<ol>
<li><strong>Startup Check</strong>: Verify the agent&#39;s memory state, check for recent tasks, load short-term memory, and check the Git repository status.</li>
<li><strong>Task Completion</strong>: Log task completion details, update short-term memory, and create incremental Git backups if necessary.</li>
<li><strong>Session Cleanup</strong>: Finalize the agent session, update short-term memory, and log the session summary to the extended context.</li>
</ol>
<p>By automating these self-management tasks, the script helps maintain the reliability and consistency of the agent&#39;s memory contributions and the overall system&#39;s codebase.</p>
<h2 id="technical-architecture">Technical Architecture</h2>
<p>The <code>AgentSelfManagement</code> class is the main component of this script, responsible for coordinating the various self-management tasks. Here&#39;s a breakdown of the key components and data flow:</p>
<ol>
<li><strong>Initialization</strong>: The constructor sets up the necessary file paths and session-specific metadata.</li>
<li><strong>Startup Check</strong>:<ul>
<li><code>checkRecentTasks()</code>: Loads the extended context to check for recent tasks and sessions.</li>
<li><code>loadShortTermMemory()</code>: Loads the short-term memory file, checking for any incomplete tasks from the previous session.</li>
<li><code>checkGitStatus()</code>: Checks the Git repository status and determines if a backup commit is needed.</li>
<li><code>initializeSession()</code>: Initializes the current agent session, logging the session details to the extended context.</li>
</ul>
</li>
<li><strong>Task Completion</strong>:<ul>
<li><code>logTaskCompletion()</code>: Logs the task completion details, updates the short-term memory, and creates a Git backup if necessary.</li>
<li><code>updateShortTermMemory()</code>: Updates the short-term memory file with the latest task completions, memory contributions, and Git backups.</li>
<li><code>considerGitBackup()</code>: Determines if a Git backup should be created based on the task completion details.</li>
</ul>
</li>
<li><strong>Session Cleanup</strong>:<ul>
<li><code>sessionCleanup()</code>: Updates the short-term memory with the final session status, logs the session summary to the extended context, and prints the session statistics.</li>
</ul>
</li>
</ol>
<p>The script uses various Node.js core modules, such as <code>fs/promises</code>, <code>path</code>, and <code>child_process</code>, to interact with the file system and execute Git commands.</p>
<h2 id="dependencies">Dependencies</h2>
<p>The script has the following dependencies:</p>
<ul>
<li><code>fs/promises</code>: For asynchronous file system operations.</li>
<li><code>path</code>: For working with file paths.</li>
<li><code>fileURLToPath</code>: For converting a file URL to a file path.</li>
<li><code>exec</code>: For executing shell commands (via <code>child_process</code>).</li>
<li><code>promisify</code>: For converting callback-based functions to Promises.</li>
</ul>
<h2 id="key-functionsclasses">Key Functions/Classes</h2>
<h3 id="agentselfmanagement-class"><code>AgentSelfManagement</code> Class</h3>
<p>This class is responsible for managing the agent&#39;s self-management tasks.</p>
<h4 id="constructor">Constructor</h4>
<ul>
<li><code>constructor()</code>: Initializes the necessary file paths and session-specific metadata.</li>
</ul>
<h4 id="startup-check-methods">Startup Check Methods</h4>
<ul>
<li><code>startupCheck()</code>: Performs the startup check, including recent task verification, short-term memory loading, and Git status check.</li>
<li><code>checkRecentTasks()</code>: Loads the extended context and retrieves the last 5 recent sessions.</li>
<li><code>loadShortTermMemory()</code>: Loads the short-term memory file and checks for any incomplete tasks from the previous session.</li>
<li><code>checkGitStatus()</code>: Checks the Git repository status and determines if a backup commit is needed.</li>
<li><code>initializeSession()</code>: Initializes the current agent session and logs the session details to the extended context.</li>
</ul>
<h4 id="task-completion-methods">Task Completion Methods</h4>
<ul>
<li><code>logTaskCompletion(taskDescription, outcome, filesModified)</code>: Logs the task completion details, updates the short-term memory, and creates a Git backup if necessary.</li>
<li><code>updateShortTermMemory()</code>: Updates the short-term memory file with the latest task completions, memory contributions, and Git backups.</li>
<li><code>considerGitBackup(completion)</code>: Determines if a Git backup should be created based on the task completion details.</li>
</ul>
<h4 id="session-cleanup-method">Session Cleanup Method</h4>
<ul>
<li><code>sessionCleanup()</code>: Updates the short-term memory with the final session status, logs the session summary to the extended context, and prints the session statistics.</li>
</ul>
<h2 id="usage-examples">Usage Examples</h2>
<h3 id="startup-check">Startup Check</h3>
<pre><code class="language-bash"><pre><code class="language-bash">node agent-self-management.js startup</code></pre>
</code></pre>
<p>This command will perform the startup check, verifying the agent&#39;s memory state, checking for recent tasks, loading short-term memory, and checking the Git repository status.</p>
<h3 id="task-completion">Task Completion</h3>
<pre><code class="language-bash"><pre><code class="language-bash">node agent-self-management.js task-complete "Fetch and process data" "Completed"</code></pre>
</code></pre>
<p>This command will log the task completion details, update the short-term memory, and create a Git backup if necessary.</p>
<h3 id="session-cleanup">Session Cleanup</h3>
<pre><code class="language-bash"><pre><code class="language-bash">node agent-self-management.js cleanup</code></pre>
</code></pre>
<p>This command will finalize the agent session, update the short-term memory, and log the session summary to the extended context.</p>
<h2 id="configuration">Configuration</h2>
<p>The script does not require any specific configuration options or environment variables. It uses the file paths and metadata defined in the <code>constructor()</code> method.</p>
<h2 id="error-handling">Error Handling</h2>
<p>The script uses try-catch blocks to handle various errors that may occur during the self-management tasks. Errors are logged to the console with appropriate color-coded messages for better visibility.</p>
<h2 id="integration">Integration</h2>
<p>The <code>agent-self-management.js</code> script is a core component of the agent&#39;s lifecycle management, ensuring the consistency and reliability of the agent&#39;s memory contributions and the overall system&#39;s codebase. It should be integrated with the agent&#39;s startup and task completion routines to ensure proper self-management.</p>
<h2 id="development-notes">Development Notes</h2>
<ol>
<li><strong>Incremental Git Backups</strong>: The script creates incremental Git backups based on specific criteria, such as the number of modified files, the types of files changed, and the number of tasks completed. This helps maintain the integrity of the codebase and provides a way to track changes and revert if necessary.</li>
<li><strong>Short-Term Memory Management</strong>: The script manages the agent&#39;s short-term memory, which includes task completions, memory contributions, and Git backups. This information is used to track the agent&#39;s activities and support the overall system&#39;s memory management.</li>
<li><strong>Extended Context Integration</strong>: The script integrates with the extended context system, logging important events and session details. This helps provide a comprehensive view of the agent&#39;s activities and the system&#39;s overall state.</li>
<li><strong>Modular Design</strong>: The <code>AgentSelfManagement</code> class is designed to be modular and reusable, allowing for easy integration into the agent&#39;s lifecycle management and potential future extensions or customizations.</li>
</ol>

        </main>

        <footer class="footer">
            <p>Generated from <strong>agent-self-management.md</strong> ‚Ä¢ StackTrackr Documentation System ‚Ä¢ Last updated: 2025-08-20</p>
        </footer>
    </div>
</body>
</html>