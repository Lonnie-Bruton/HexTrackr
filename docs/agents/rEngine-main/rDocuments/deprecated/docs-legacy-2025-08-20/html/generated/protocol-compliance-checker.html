<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocol Compliance Checker for StackTrackr rEngine - StackTrackr Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #20c997 0%, #198754 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header-icon {
            font-size: 3em;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header .subtitle {
            font-size: 1.1em;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .header .meta {
            font-size: 0.9em;
            opacity: 0.7;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .nav-bar {
            background: #f8f9fa;
            padding: 15px 30px;
            border-bottom: 1px solid #e1e4e8;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .nav-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .nav-link {
            padding: 8px 16px;
            background: #007acc;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .content {
            padding: 40px;
            max-width: none;
        }

        .content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
            color: #2c3e50;
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .content h1 { font-size: 2.2em; border-bottom: 3px solid #007acc; padding-bottom: 10px; }
        .content h2 { font-size: 1.8em; color: #007acc; }
        .content h3 { font-size: 1.4em; color: #495057; }
        .content h4 { font-size: 1.2em; color: #6c757d; }

        .content p {
            margin-bottom: 16px;
            line-height: 1.7;
            color: #444;
        }

        .content ul, .content ol {
            margin-bottom: 16px;
            padding-left: 25px;
        }

        .content li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .content blockquote {
            border-left: 4px solid #007acc;
            background: #f8f9fa;
            margin: 20px 0;
            padding: 15px 20px;
            border-radius: 0 6px 6px 0;
        }

        .content code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            color: #e83e8c;
        }

        .content pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .content pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .content th, .content td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e1e4e8;
        }

        .content th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .content tr:hover {
            background: #f8f9fa;
        }

        .content a {
            color: #007acc;
            text-decoration: none;
            font-weight: 500;
        }

        .content a:hover {
            color: #0056b3;
            text-decoration: underline;
        }

        .footer {
            background: #f8f9fa;
            padding: 20px 30px;
            border-top: 1px solid #e1e4e8;
            text-align: center;
            color: #6c757d;
            font-size: 0.9em;
        }

        .doc-meta {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #007acc;
        }

        .doc-meta h3 {
            color: #007acc;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .meta-item {
            background: white;
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
        }

        .meta-label {
            font-weight: 600;
            color: #495057;
            font-size: 0.9em;
        }

        .meta-value {
            color: #6c757d;
            font-size: 0.9em;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .content { padding: 20px; }
            .header { padding: 20px; }
            .nav-bar { padding: 15px 20px; }
            .nav-links { justify-content: center; }
            .header .meta { flex-direction: column; gap: 10px; }
        }

        /* Category-specific colors */
        .color-vision { --primary: #9c27b0; --secondary: #7b1fa2; }
        .color-roadmap { --primary: #007acc; --secondary: #0056b3; }
        .color-engine { --primary: #2c3e50; --secondary: #34495e; }
        .color-agent { --primary: #28a745; --secondary: #198754; }
        .color-brain { --primary: #6f42c1; --secondary: #495057; }
        .color-docker { --primary: #0db7ed; --secondary: #086dd7; }
        .color-mobile { --primary: #fd7e14; --secondary: #dc3545; }
        .color-protocol { --primary: #20c997; --secondary: #198754; }
        .color-scribe { --primary: #17a2b8; --secondary: #138496; }
        .color-groq { --primary: #ffc107; --secondary: #e0a800; }
        .color-task { --primary: #dc3545; --secondary: #c82333; }
        .color-cleanup { --primary: #6c757d; --secondary: #5a6268; }
        .color-quickstart { --primary: #28a745; --secondary: #198754; }
        .color-patch { --primary: #ff6b35; --secondary: #e55a32; }
        .color-rengine { --primary: #8b5cf6; --secondary: #7c3aed; }
        .color-default { --primary: #495057; --secondary: #6c757d; }
    </style>
</head>
<body class="color-protocol">
    <div class="container">
        <header class="header">
            <div class="header-icon">üìã</div>
            <h1>Protocol Compliance Checker for StackTrackr rEngine</h1>
            <div class="subtitle">Protocol Guide</div>
            <div class="meta">
                <span>üìÅ protocol-compliance-checker.md</span>
                <span>üìÖ 2025-08-20</span>
                <span>üìä 6KB</span>
            </div>
        </header>

        <nav class="nav-bar">
            <div class="nav-links">
                <a href="../index.html" class="nav-link">üè† Documentation Home</a>
                <a href="../developmentstatus.html" class="nav-link">üìä Development Status</a>
                <a href="../generated/protocol-compliance-checker.md" class="nav-link">üìù View Source MD</a>
                <a href="../json/protocol-compliance-checker.json" class="nav-link">üîß JSON Data</a>
            </div>
        </nav>

        <main class="content">
            <h1 id="protocol-compliance-checker-for-stacktrackr-rengine">Protocol Compliance Checker for StackTrackr rEngine</h1>
<h2 id="purpose--overview">Purpose &amp; Overview</h2>
<p>The <code>protocol-compliance-checker.js</code> script is a critical component in the StackTrackr system, responsible for enforcing a set of protocols that prevent agents from breaking the core functionality of the rEngine. This script checks for various types of violations, such as creating files outside the project root directory, performing automated GitHub operations, and not creating backups before making changes. By enforcing these protocols, the script helps maintain the stability and integrity of the StackTrackr system.</p>
<h2 id="technical-architecture">Technical Architecture</h2>
<p>The <code>ProtocolComplianceChecker</code> class is the main component of this script. It performs the following tasks:</p>
<ol>
<li><strong>Compliance Check</strong>: The <code>checkCompliance()</code> method runs a series of checks to ensure the system is compliant with the defined protocols.</li>
<li><strong>File Containment Check</strong>: The <code>checkFileContainment()</code> method verifies that no files are created outside the project root directory.</li>
<li><strong>Git Operations Check</strong>: The <code>checkGitOperations()</code> method scans all JavaScript files in the project for any automated GitHub push or pull operations.</li>
<li><strong>Backup Requirements Check</strong>: The <code>checkBackupRequirements()</code> method ensures that a backup directory exists and that a recent backup has been created before any changes are made.</li>
<li><strong>Path References Check</strong>: The <code>checkPathReferences()</code> method scans all JavaScript files in the <code>rEngine</code> directory for any dangerous path patterns that could lead to unauthorized access.</li>
<li><strong>Violation Handling</strong>: The <code>addViolation()</code> method is used to record any violations found during the compliance checks, and the <code>generateComplianceReport()</code> method consolidates and reports on the violations.</li>
<li><strong>Utility Methods</strong>: The script also includes some utility methods, such as <code>validatePath()</code> and <code>validateGitOperation()</code>, which can be used to quickly validate specific operations, and <code>createProtocolBackup()</code>, which creates a backup of critical files before changes are made.</li>
</ol>
<h2 id="dependencies">Dependencies</h2>
<p>This script relies on the following external dependencies:</p>
<ul>
<li><code>fs-extra</code>: A comprehensive file system library for Node.js</li>
<li><code>path</code>: The built-in path module for working with file paths</li>
<li><code>child_process</code>: The built-in child process module for executing shell commands</li>
</ul>
<h2 id="key-functionsclasses">Key Functions/Classes</h2>
<h3 id="protocolcompliancechecker-class"><code>ProtocolComplianceChecker</code> Class</h3>
<h4 id="constructor"><code>constructor()</code></h4>
<ul>
<li>Initializes the <code>ProtocolComplianceChecker</code> instance with the project root directory and sets up initial values for violations and compliance status.</li>
</ul>
<h4 id="checkcompliance"><code>checkCompliance()</code></h4>
<ul>
<li>Runs the full set of compliance checks and returns an object with the overall compliance status and a list of violations.</li>
</ul>
<h4 id="checkfilecontainment"><code>checkFileContainment()</code></h4>
<ul>
<li>Ensures that no files are created outside the project root directory.</li>
</ul>
<h4 id="checkgitoperations"><code>checkGitOperations()</code></h4>
<ul>
<li>Scans all JavaScript files in the project for any automated GitHub push or pull operations.</li>
</ul>
<h4 id="checkbackuprequirements"><code>checkBackupRequirements()</code></h4>
<ul>
<li>Verifies that a backup directory exists and that a recent backup has been created before any changes are made.</li>
</ul>
<h4 id="checkpathreferences"><code>checkPathReferences()</code></h4>
<ul>
<li>Scans all JavaScript files in the <code>rEngine</code> directory for any dangerous path patterns that could lead to unauthorized access.</li>
</ul>
<h4 id="addviolationtype-message-action"><code>addViolation(type, message, action)</code></h4>
<ul>
<li>Adds a new violation to the <code>violations</code> array and sets the <code>isCompliant</code> flag to <code>false</code>.</li>
</ul>
<h4 id="generatecompliancereport"><code>generateComplianceReport()</code></h4>
<ul>
<li>Generates a detailed report of the compliance status, including any violations found.</li>
</ul>
<h4 id="validatepathfilepath"><code>validatePath(filePath)</code></h4>
<ul>
<li>Validates that a given file path is within the project root directory.</li>
</ul>
<h4 id="validategitoperationoperation"><code>validateGitOperation(operation)</code></h4>
<ul>
<li>Validates that a given Git operation (e.g., push, pull) is not automated.</li>
</ul>
<h4 id="createprotocolbackupdescription"><code>createProtocolBackup(description)</code></h4>
<ul>
<li>Creates a backup of critical files in the <code>rEngine/backups</code> directory, with a timestamp-based directory name.</li>
</ul>
<h4 id="promptgithubsync"><code>promptGitHubSync()</code></h4>
<ul>
<li>Displays a message prompting the user to manually sync changes with GitHub using the GitHub Desktop app.</li>
</ul>
<h2 id="usage-examples">Usage Examples</h2>
<p>To use the <code>ProtocolComplianceChecker</code>, you can create an instance of the class and call the <code>checkCompliance()</code> method:</p>
<pre><code class="language-javascript"><pre><code class="language-javascript">const checker = new ProtocolComplianceChecker();
const result = await checker.checkCompliance();

if (result.compliant) {
  console.log('All protocols are compliant. Safe to proceed with operations.');
} else {
  console.error('Protocol violations detected. Operations blocked until resolved.');
  for (const violation of result.violations) {
    console.error(`[${violation.type}] ${violation.message} - Action: ${violation.action}`);
  }
}</code></pre>
</code></pre>
<p>To create a manual backup of critical files, you can use the <code>createProtocolBackup()</code> method:</p>
<pre><code class="language-javascript"><pre><code class="language-javascript">const backupDir = await checker.createProtocolBackup('Manual backup before changes');
console.log(`Backup created at: ${backupDir}`);</code></pre>
</code></pre>
<p>If you need to perform a Git operation, you should first call the <code>promptGitHubSync()</code> method to instruct the user to use the GitHub Desktop app for the operation:</p>
<pre><code class="language-javascript"><pre><code class="language-javascript">checker.promptGitHubSync();
// Perform Git operation using GitHub Desktop app</code></pre>
</code></pre>
<h2 id="configuration">Configuration</h2>
<p>This script does not have any configuration options or environment variables. The project root directory is hardcoded to <code>/Volumes/DATA/GitHub/StackTrackr</code>.</p>
<h2 id="error-handling">Error Handling</h2>
<p>The script uses try-catch blocks to handle errors that may occur during the various compliance checks. If an error occurs, the script will log a warning message and continue with the remaining checks.</p>
<h2 id="integration">Integration</h2>
<p>The <code>ProtocolComplianceChecker</code> class is a critical component of the StackTrackr system, as it helps maintain the integrity and stability of the rEngine. This script should be run before any agent operation to ensure that the system is in a compliant state.</p>
<h2 id="development-notes">Development Notes</h2>
<ul>
<li>The script uses a combination of file system operations, regular expressions, and shell command execution to perform the compliance checks.</li>
<li>The <code>createProtocolBackup()</code> method creates a timestamped backup directory in the <code>rEngine/backups</code> directory and copies critical files to it.</li>
<li>The <code>promptGitHubSync()</code> method is used to instruct the user to perform any Git operations manually using the GitHub Desktop app, as the script does not allow automated GitHub operations.</li>
<li>The script is designed to be run as a standalone CLI tool, but it can also be imported and used as a module in other parts of the StackTrackr system.</li>
</ul>

        </main>

        <footer class="footer">
            <p>Generated from <strong>protocol-compliance-checker.md</strong> ‚Ä¢ StackTrackr Documentation System ‚Ä¢ Last updated: 2025-08-20</p>
        </footer>
    </div>
</body>
</html>