<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filters.js Chunk 2 Documentation - StackTrackr Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #495057 0%, #6c757d 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header-icon {
            font-size: 3em;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header .subtitle {
            font-size: 1.1em;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .header .meta {
            font-size: 0.9em;
            opacity: 0.7;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .nav-bar {
            background: #f8f9fa;
            padding: 15px 30px;
            border-bottom: 1px solid #e1e4e8;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .nav-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .nav-link {
            padding: 8px 16px;
            background: #007acc;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .content {
            padding: 40px;
            max-width: none;
        }

        .content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
            color: #2c3e50;
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .content h1 { font-size: 2.2em; border-bottom: 3px solid #007acc; padding-bottom: 10px; }
        .content h2 { font-size: 1.8em; color: #007acc; }
        .content h3 { font-size: 1.4em; color: #495057; }
        .content h4 { font-size: 1.2em; color: #6c757d; }

        .content p {
            margin-bottom: 16px;
            line-height: 1.7;
            color: #444;
        }

        .content ul, .content ol {
            margin-bottom: 16px;
            padding-left: 25px;
        }

        .content li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .content blockquote {
            border-left: 4px solid #007acc;
            background: #f8f9fa;
            margin: 20px 0;
            padding: 15px 20px;
            border-radius: 0 6px 6px 0;
        }

        .content code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            color: #e83e8c;
        }

        .content pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .content pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .content th, .content td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e1e4e8;
        }

        .content th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .content tr:hover {
            background: #f8f9fa;
        }

        .content a {
            color: #007acc;
            text-decoration: none;
            font-weight: 500;
        }

        .content a:hover {
            color: #0056b3;
            text-decoration: underline;
        }

        .footer {
            background: #f8f9fa;
            padding: 20px 30px;
            border-top: 1px solid #e1e4e8;
            text-align: center;
            color: #6c757d;
            font-size: 0.9em;
        }

        .doc-meta {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #007acc;
        }

        .doc-meta h3 {
            color: #007acc;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .meta-item {
            background: white;
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
        }

        .meta-label {
            font-weight: 600;
            color: #495057;
            font-size: 0.9em;
        }

        .meta-value {
            color: #6c757d;
            font-size: 0.9em;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .content { padding: 20px; }
            .header { padding: 20px; }
            .nav-bar { padding: 15px 20px; }
            .nav-links { justify-content: center; }
            .header .meta { flex-direction: column; gap: 10px; }
        }

        /* Category-specific colors */
        .color-vision { --primary: #9c27b0; --secondary: #7b1fa2; }
        .color-roadmap { --primary: #007acc; --secondary: #0056b3; }
        .color-engine { --primary: #2c3e50; --secondary: #34495e; }
        .color-agent { --primary: #28a745; --secondary: #198754; }
        .color-brain { --primary: #6f42c1; --secondary: #495057; }
        .color-docker { --primary: #0db7ed; --secondary: #086dd7; }
        .color-mobile { --primary: #fd7e14; --secondary: #dc3545; }
        .color-protocol { --primary: #20c997; --secondary: #198754; }
        .color-scribe { --primary: #17a2b8; --secondary: #138496; }
        .color-groq { --primary: #ffc107; --secondary: #e0a800; }
        .color-task { --primary: #dc3545; --secondary: #c82333; }
        .color-cleanup { --primary: #6c757d; --secondary: #5a6268; }
        .color-quickstart { --primary: #28a745; --secondary: #198754; }
        .color-patch { --primary: #ff6b35; --secondary: #e55a32; }
        .color-rengine { --primary: #8b5cf6; --secondary: #7c3aed; }
        .color-default { --primary: #495057; --secondary: #6c757d; }
    </style>
</head>
<body class="color-default">
    <div class="container">
        <header class="header">
            <div class="header-icon">üìÑ</div>
            <h1>Filters.js Chunk 2 Documentation</h1>
            <div class="subtitle">Documentation</div>
            <div class="meta">
                <span>üìÅ filters_chunk.md</span>
                <span>üìÖ 2025-08-20</span>
                <span>üìä 6KB</span>
            </div>
        </header>

        <nav class="nav-bar">
            <div class="nav-links">
                <a href="../index.html" class="nav-link">üè† Documentation Home</a>
                <a href="../developmentstatus.html" class="nav-link">üìä Development Status</a>
                <a href="../rProjects/StackTrackr/js/filters_chunk.md" class="nav-link">üìù View Source MD</a>
                <a href="../json/filters_chunk.json" class="nav-link">üîß JSON Data</a>
            </div>
        </nav>

        <main class="content">
            <h1 id="filtersjs-chunk-2-documentation">Filters.js Chunk 2 Documentation</h1>
<h2 id="purpose--overview">Purpose &amp; Overview</h2>
<p>This script is responsible for managing the active filters and rendering the corresponding filter chips in the user interface. It provides functionality for adding, removing, and clearing filters, as well as applying advanced filtering logic to the inventory data.</p>
<p>The script handles the legacy column filters, as well as the more advanced filters that allow users to filter by various criteria, such as metal, type, purchase location, storage location, and collectability. It also includes a powerful text search feature that supports multi-word searches and advanced logic to handle common coin series like Eagles, Maples, Britannias, Krugerrands, Buffalos, Pandas, and Kangaroos.</p>
<h2 id="technical-architecture">Technical Architecture</h2>
<p>The script is structured as follows:</p>
<ol>
<li><p><strong>renderActiveFilters</strong>: This function is responsible for creating and rendering the filter chips in the user interface. It takes the active filters and the container element as input, and generates the appropriate filter chips with the correct styling, tooltips, and event handlers.</p>
</li>
<li><p><strong>filterInventoryAdvanced</strong>: This function applies the advanced filters to the inventory data, returning the filtered result. It iterates over the active filters and applies the corresponding filtering logic for each field.</p>
</li>
</ol>
<p>The script utilizes various helper functions, such as <code>simplifyChipValue</code>, <code>getTypeColor</code>, <code>getColor</code>, <code>getContrastColor</code>, <code>getPurchaseLocationColor</code>, <code>getStorageLocationColor</code>, and <code>getCompositionFirstWords</code>, to handle the specific logic for different filter types and ensure consistent styling and behavior.</p>
<h2 id="dependencies">Dependencies</h2>
<p>The script relies on the following imports and external dependencies:</p>
<ul>
<li><code>inventory</code>: The inventory data that is being filtered.</li>
<li><code>activeFilters</code>: The object containing the currently active filters.</li>
<li><code>columnFilters</code>: The legacy column filters.</li>
<li><code>METAL_COLORS</code> and <code>METAL_TEXT_COLORS</code>: Objects that define the predefined colors for different metal types.</li>
<li><code>nameColors</code>: An object that maps names to colors, used as a fallback for metals without predefined colors.</li>
<li><code>applyQuickFilter</code> and <code>removeFilter</code>: Functions for applying and removing filters.</li>
<li><code>clearAllFilters</code>: A function to clear all active filters.</li>
<li><code>formatDisplayDate</code>: A function to format the date for display.</li>
<li><code>simplifyChipValue</code>: A function to simplify the display value for filter chips.</li>
</ul>
<h2 id="key-functionsclasses">Key Functions/Classes</h2>
<ol>
<li><p><strong>renderActiveFilters(container)</strong>: This function is responsible for rendering the active filters as a set of filter chips in the provided container element.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li><code>container</code>: The DOM element where the filter chips should be rendered.</li>
</ul>
<p><strong>Return Value</strong>: None.</p>
</li>
<li><p><strong>filterInventoryAdvanced()</strong>: This function applies the advanced filters to the <code>inventory</code> data and returns the filtered result.</p>
<p><strong>Parameters</strong>: None.</p>
<p><strong>Return Value</strong>: The filtered inventory items.</p>
</li>
</ol>
<h2 id="usage-examples">Usage Examples</h2>
<p>To use the <code>renderActiveFilters</code> function, you would call it with the appropriate container element:</p>
<pre><code class="language-javascript"><pre><code class="language-javascript">const filtersContainer = document.getElementById('filters-container');
renderActiveFilters(filtersContainer);</code></pre>
</code></pre>
<p>To apply the advanced filters and get the filtered inventory, you would call the <code>filterInventoryAdvanced</code> function:</p>
<pre><code class="language-javascript"><pre><code class="language-javascript">const filteredInventory = filterInventoryAdvanced();
// Use the filteredInventory array as needed</code></pre>
</code></pre>
<h2 id="configuration">Configuration</h2>
<p>There are no specific configuration options or environment variables for this script. However, it does rely on the following global variables and functions:</p>
<ul>
<li><code>inventory</code>: The inventory data that is being filtered.</li>
<li><code>activeFilters</code>: The object containing the currently active filters.</li>
<li><code>columnFilters</code>: The legacy column filters.</li>
<li><code>METAL_COLORS</code> and <code>METAL_TEXT_COLORS</code>: Objects that define the predefined colors for different metal types.</li>
<li><code>nameColors</code>: An object that maps names to colors, used as a fallback for metals without predefined colors.</li>
<li><code>applyQuickFilter</code> and <code>removeFilter</code>: Functions for applying and removing filters.</li>
<li><code>clearAllFilters</code>: A function to clear all active filters.</li>
<li><code>formatDisplayDate</code>: A function to format the date for display.</li>
<li><code>simplifyChipValue</code>: A function to simplify the display value for filter chips.</li>
</ul>
<h2 id="error-handling">Error Handling</h2>
<p>The script does not explicitly handle errors, as it relies on the availability of the global variables and functions mentioned in the Configuration section. If any of these dependencies are not properly set up or defined, the script may encounter errors.</p>
<h2 id="integration">Integration</h2>
<p>This script is a part of a larger system that manages the inventory and filtering functionality. It integrates with the overall user interface and the inventory data to provide a comprehensive filtering experience for the users.</p>
<h2 id="development-notes">Development Notes</h2>
<ol>
<li><p><strong>Advanced Filtering Logic</strong>: The <code>filterInventoryAdvanced</code> function includes some complex logic to handle advanced filtering scenarios, especially for common coin series like Eagles, Maples, Britannias, Krugerrands, Buffalos, Pandas, and Kangaroos. This logic ensures that the filtering produces accurate and intuitive results for these types of items.</p>
</li>
<li><p><strong>Extensibility</strong>: The script is designed to be extensible, allowing for the addition of new filter types and custom filtering logic as needed. The modular structure and use of helper functions make it easier to maintain and expand the functionality.</p>
</li>
<li><p><strong>Optimization</strong>: The script makes use of various optimization techniques, such as simplifying chip values, caching colors, and using efficient array filtering methods, to ensure good performance, even with large inventories and complex filtering scenarios.</p>
</li>
<li><p><strong>Accessibility</strong>: The script includes accessibility features, such as making the filter chip close buttons keyboard-accessible and providing appropriate aria-labels and titles for the filter chips.</p>
</li>
<li><p><strong>Debugging</strong>: The script includes an optional debug mode, which can be enabled by setting the <code>window.DEBUG_FILTERS</code> flag. This mode provides additional console logging to help with debugging and understanding the filter rendering process.</p>
</li>
</ol>
<p>Overall, this script is a robust and well-designed component that plays a crucial role in the larger inventory management system.</p>

        </main>

        <footer class="footer">
            <p>Generated from <strong>filters_chunk.md</strong> ‚Ä¢ StackTrackr Documentation System ‚Ä¢ Last updated: 2025-08-20</p>
        </footer>
    </div>
</body>
</html>