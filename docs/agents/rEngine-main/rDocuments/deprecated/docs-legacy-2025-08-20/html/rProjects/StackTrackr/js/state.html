<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>state.js Documentation - StackTrackr Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #495057 0%, #6c757d 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header-icon {
            font-size: 3em;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header .subtitle {
            font-size: 1.1em;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .header .meta {
            font-size: 0.9em;
            opacity: 0.7;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .nav-bar {
            background: #f8f9fa;
            padding: 15px 30px;
            border-bottom: 1px solid #e1e4e8;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .nav-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .nav-link {
            padding: 8px 16px;
            background: #007acc;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .content {
            padding: 40px;
            max-width: none;
        }

        .content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
            color: #2c3e50;
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .content h1 { font-size: 2.2em; border-bottom: 3px solid #007acc; padding-bottom: 10px; }
        .content h2 { font-size: 1.8em; color: #007acc; }
        .content h3 { font-size: 1.4em; color: #495057; }
        .content h4 { font-size: 1.2em; color: #6c757d; }

        .content p {
            margin-bottom: 16px;
            line-height: 1.7;
            color: #444;
        }

        .content ul, .content ol {
            margin-bottom: 16px;
            padding-left: 25px;
        }

        .content li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .content blockquote {
            border-left: 4px solid #007acc;
            background: #f8f9fa;
            margin: 20px 0;
            padding: 15px 20px;
            border-radius: 0 6px 6px 0;
        }

        .content code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            color: #e83e8c;
        }

        .content pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .content pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .content th, .content td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e1e4e8;
        }

        .content th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .content tr:hover {
            background: #f8f9fa;
        }

        .content a {
            color: #007acc;
            text-decoration: none;
            font-weight: 500;
        }

        .content a:hover {
            color: #0056b3;
            text-decoration: underline;
        }

        .footer {
            background: #f8f9fa;
            padding: 20px 30px;
            border-top: 1px solid #e1e4e8;
            text-align: center;
            color: #6c757d;
            font-size: 0.9em;
        }

        .doc-meta {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #007acc;
        }

        .doc-meta h3 {
            color: #007acc;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .meta-item {
            background: white;
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
        }

        .meta-label {
            font-weight: 600;
            color: #495057;
            font-size: 0.9em;
        }

        .meta-value {
            color: #6c757d;
            font-size: 0.9em;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .content { padding: 20px; }
            .header { padding: 20px; }
            .nav-bar { padding: 15px 20px; }
            .nav-links { justify-content: center; }
            .header .meta { flex-direction: column; gap: 10px; }
        }

        /* Category-specific colors */
        .color-vision { --primary: #9c27b0; --secondary: #7b1fa2; }
        .color-roadmap { --primary: #007acc; --secondary: #0056b3; }
        .color-engine { --primary: #2c3e50; --secondary: #34495e; }
        .color-agent { --primary: #28a745; --secondary: #198754; }
        .color-brain { --primary: #6f42c1; --secondary: #495057; }
        .color-docker { --primary: #0db7ed; --secondary: #086dd7; }
        .color-mobile { --primary: #fd7e14; --secondary: #dc3545; }
        .color-protocol { --primary: #20c997; --secondary: #198754; }
        .color-scribe { --primary: #17a2b8; --secondary: #138496; }
        .color-groq { --primary: #ffc107; --secondary: #e0a800; }
        .color-task { --primary: #dc3545; --secondary: #c82333; }
        .color-cleanup { --primary: #6c757d; --secondary: #5a6268; }
        .color-quickstart { --primary: #28a745; --secondary: #198754; }
        .color-patch { --primary: #ff6b35; --secondary: #e55a32; }
        .color-rengine { --primary: #8b5cf6; --secondary: #7c3aed; }
        .color-default { --primary: #495057; --secondary: #6c757d; }
    </style>
</head>
<body class="color-default">
    <div class="container">
        <header class="header">
            <div class="header-icon">üìÑ</div>
            <h1>state.js Documentation</h1>
            <div class="subtitle">Documentation</div>
            <div class="meta">
                <span>üìÅ state.md</span>
                <span>üìÖ 2025-08-20</span>
                <span>üìä 4KB</span>
            </div>
        </header>

        <nav class="nav-bar">
            <div class="nav-links">
                <a href="../index.html" class="nav-link">üè† Documentation Home</a>
                <a href="../developmentstatus.html" class="nav-link">üìä Development Status</a>
                <a href="../rProjects/StackTrackr/js/state.md" class="nav-link">üìù View Source MD</a>
                <a href="../json/state.json" class="nav-link">üîß JSON Data</a>
            </div>
        </nav>

        <main class="content">
            <h1 id="statejs-documentation">state.js Documentation</h1>
<h2 id="purpose--overview">Purpose &amp; Overview</h2>
<p>The <code>state.js</code> script manages the application state for a precious metals inventory management system. It tracks various aspects of the inventory, including sorting, editing, pagination, search, and chart data. The script also handles the storage and retrieval of data from the user&#39;s local storage, as well as the integration with a Metals API for real-time spot price information.</p>
<h2 id="technical-architecture">Technical Architecture</h2>
<p>The <code>state.js</code> script is responsible for maintaining the state of the application, which is organized into the following key components:</p>
<ol>
<li><strong>Sorting State</strong>: Tracks the currently selected column for sorting and the sort direction (ascending or descending).</li>
<li><strong>Editing State</strong>: Keeps track of the item being edited, the item whose notes are being edited, and the change log entry currently being edited.</li>
<li><strong>Pagination State</strong>: Manages the current page number and the number of items to display per page.</li>
<li><strong>Search State</strong>: Stores the current search query and active column filters.</li>
<li><strong>Chart State</strong>: Maintains the instances of the type and location charts used in the application.</li>
<li><strong>Composition Options</strong>: Stores the available composition options (e.g., Gold, Silver, Platinum, Palladium, Alloy).</li>
<li><strong>Market Value View</strong>: Tracks the items currently displaying market value instead of purchase price.</li>
<li><strong>DOM Elements</strong>: Caches references to various HTML elements for improved performance.</li>
<li><strong>Change Log</strong>: Stores the history of changes made to the inventory.</li>
<li><strong>Inventory Data</strong>: Holds the main inventory data structure.</li>
<li><strong>Spot Prices</strong>: Maintains the current spot prices for different metals.</li>
<li><strong>Spot Price History</strong>: Stores the historical spot price records.</li>
<li><strong>API Configuration and Cache</strong>: Manages the current Metals API configuration and a cached version of the API data.</li>
<li><strong>Catalog Map</strong>: Provides backward compatibility for the catalog ID management system.</li>
</ol>
<h2 id="dependencies">Dependencies</h2>
<p>The <code>state.js</code> script does not have any direct dependencies. It is a standalone module that manages the application state.</p>
<h2 id="key-functionsclasses">Key Functions/Classes</h2>
<p>The <code>state.js</code> script does not contain any functions or classes. Instead, it defines several global variables and objects that are used to manage the application state.</p>
<h2 id="usage-examples">Usage Examples</h2>
<p>The <code>state.js</code> script is not meant to be used directly. It is a part of a larger application and is imported and utilized by other components of the system.</p>
<h2 id="configuration">Configuration</h2>
<p>The <code>state.js</code> script does not have any configuration options or environment variables. It relies on the data stored in the user&#39;s local storage and the Metals API configuration provided by the application.</p>
<h2 id="error-handling">Error Handling</h2>
<p>The <code>state.js</code> script does not contain any explicit error handling mechanisms. It assumes that the data it receives is valid and well-formed. Any errors that may occur during the usage of the script are handled by the application that integrates with it.</p>
<h2 id="integration">Integration</h2>
<p>The <code>state.js</code> script is a crucial component of the precious metals inventory management application. It provides a centralized and structured way to manage the application&#39;s state, which is accessed and updated by various other parts of the system, such as the user interface, data management, and spot price integration.</p>
<h2 id="development-notes">Development Notes</h2>
<ol>
<li><strong>Backward Compatibility</strong>: The <code>catalogMap</code> object is a proxy that provides backward compatibility for the catalog ID management system. It ensures a smooth transition from the old catalog ID handling approach to the new <code>catalogManager</code> implementation.</li>
<li><strong>Spot Price Integration</strong>: The script integrates with a Metals API to retrieve real-time spot prices for different metals. The API configuration and cached data are managed within the script.</li>
<li><strong>Local Storage Usage</strong>: The script uses the browser&#39;s local storage to persist the change log and the inventory data. This allows the application to maintain the user&#39;s data across sessions.</li>
<li><strong>Performance Optimization</strong>: The script caches references to various HTML elements to improve the performance of the application by reducing the need for repeated DOM queries.</li>
<li><strong>Modular Design</strong>: The script is designed to be a self-contained module that manages the application&#39;s state. This promotes code reusability and maintainability.</li>
</ol>
<p>Overall, the <code>state.js</code> script is a crucial component of the precious metals inventory management application, providing a robust and structured way to manage the application&#39;s state and data.</p>

        </main>

        <footer class="footer">
            <p>Generated from <strong>state.md</strong> ‚Ä¢ StackTrackr Documentation System ‚Ä¢ Last updated: 2025-08-20</p>
        </footer>
    </div>
</body>
</html>