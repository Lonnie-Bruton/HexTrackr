<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change Log Documentation - StackTrackr Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #495057 0%, #6c757d 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header-icon {
            font-size: 3em;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header .subtitle {
            font-size: 1.1em;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .header .meta {
            font-size: 0.9em;
            opacity: 0.7;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .nav-bar {
            background: #f8f9fa;
            padding: 15px 30px;
            border-bottom: 1px solid #e1e4e8;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .nav-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .nav-link {
            padding: 8px 16px;
            background: #007acc;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .content {
            padding: 40px;
            max-width: none;
        }

        .content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
            color: #2c3e50;
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .content h1 { font-size: 2.2em; border-bottom: 3px solid #007acc; padding-bottom: 10px; }
        .content h2 { font-size: 1.8em; color: #007acc; }
        .content h3 { font-size: 1.4em; color: #495057; }
        .content h4 { font-size: 1.2em; color: #6c757d; }

        .content p {
            margin-bottom: 16px;
            line-height: 1.7;
            color: #444;
        }

        .content ul, .content ol {
            margin-bottom: 16px;
            padding-left: 25px;
        }

        .content li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .content blockquote {
            border-left: 4px solid #007acc;
            background: #f8f9fa;
            margin: 20px 0;
            padding: 15px 20px;
            border-radius: 0 6px 6px 0;
        }

        .content code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            color: #e83e8c;
        }

        .content pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .content pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .content th, .content td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e1e4e8;
        }

        .content th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .content tr:hover {
            background: #f8f9fa;
        }

        .content a {
            color: #007acc;
            text-decoration: none;
            font-weight: 500;
        }

        .content a:hover {
            color: #0056b3;
            text-decoration: underline;
        }

        .footer {
            background: #f8f9fa;
            padding: 20px 30px;
            border-top: 1px solid #e1e4e8;
            text-align: center;
            color: #6c757d;
            font-size: 0.9em;
        }

        .doc-meta {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #007acc;
        }

        .doc-meta h3 {
            color: #007acc;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .meta-item {
            background: white;
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
        }

        .meta-label {
            font-weight: 600;
            color: #495057;
            font-size: 0.9em;
        }

        .meta-value {
            color: #6c757d;
            font-size: 0.9em;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .content { padding: 20px; }
            .header { padding: 20px; }
            .nav-bar { padding: 15px 20px; }
            .nav-links { justify-content: center; }
            .header .meta { flex-direction: column; gap: 10px; }
        }

        /* Category-specific colors */
        .color-vision { --primary: #9c27b0; --secondary: #7b1fa2; }
        .color-roadmap { --primary: #007acc; --secondary: #0056b3; }
        .color-engine { --primary: #2c3e50; --secondary: #34495e; }
        .color-agent { --primary: #28a745; --secondary: #198754; }
        .color-brain { --primary: #6f42c1; --secondary: #495057; }
        .color-docker { --primary: #0db7ed; --secondary: #086dd7; }
        .color-mobile { --primary: #fd7e14; --secondary: #dc3545; }
        .color-protocol { --primary: #20c997; --secondary: #198754; }
        .color-scribe { --primary: #17a2b8; --secondary: #138496; }
        .color-groq { --primary: #ffc107; --secondary: #e0a800; }
        .color-task { --primary: #dc3545; --secondary: #c82333; }
        .color-cleanup { --primary: #6c757d; --secondary: #5a6268; }
        .color-quickstart { --primary: #28a745; --secondary: #198754; }
        .color-patch { --primary: #ff6b35; --secondary: #e55a32; }
        .color-rengine { --primary: #8b5cf6; --secondary: #7c3aed; }
        .color-default { --primary: #495057; --secondary: #6c757d; }
    </style>
</head>
<body class="color-default">
    <div class="container">
        <header class="header">
            <div class="header-icon">üìÑ</div>
            <h1>Change Log Documentation</h1>
            <div class="subtitle">Documentation</div>
            <div class="meta">
                <span>üìÅ changeLog.md</span>
                <span>üìÖ 2025-08-20</span>
                <span>üìä 7KB</span>
            </div>
        </header>

        <nav class="nav-bar">
            <div class="nav-links">
                <a href="../index.html" class="nav-link">üè† Documentation Home</a>
                <a href="../developmentstatus.html" class="nav-link">üìä Development Status</a>
                <a href="../rProjects/StackTrackr/js/changeLog.md" class="nav-link">üìù View Source MD</a>
                <a href="../json/changeLog.json" class="nav-link">üîß JSON Data</a>
            </div>
        </nav>

        <main class="content">
            <h1 id="change-log-documentation">Change Log Documentation</h1>
<h2 id="purpose--overview">Purpose &amp; Overview</h2>
<p>The <code>changeLog.js</code> script is responsible for tracking and managing changes made to the inventory table in a web application. It provides the following key functionalities:</p>
<ol>
<li><strong>Logging Changes</strong>: Whenever an item in the inventory is modified, the script records the change in a change log, including the item name, field changed, old and new values, and the index of the item in the inventory array.</li>
<li><strong>Persisting Change Log</strong>: The change log is stored in the browser&#39;s <code>localStorage</code> so that it persists across page refreshes and sessions.</li>
<li><strong>Rendering Change Log</strong>: The script generates an HTML table to display the recorded changes, allowing users to view and interact with the change log.</li>
<li><strong>Undoing/Redoing Changes</strong>: Users can undo or redo individual changes from the change log, which updates the corresponding item in the inventory.</li>
<li><strong>Clearing Change Log</strong>: The script provides a mechanism to clear the entire change log if desired.</li>
</ol>
<p>This script is an important part of the application&#39;s data management and auditing capabilities, enabling users to track and revert changes made to the inventory.</p>
<h2 id="technical-architecture">Technical Architecture</h2>
<p>The <code>changeLog.js</code> script is structured around the following key components:</p>
<ol>
<li><strong>logChange</strong>: A function that records a change in the change log and persists it to <code>localStorage</code>.</li>
<li><strong>logItemChanges</strong>: A function that compares the old and new values of an inventory item and logs any differences using <code>logChange</code>.</li>
<li><strong>renderChangeLog</strong>: A function that generates the HTML table to display the change log entries.</li>
<li><strong>toggleChange</strong>: A function that allows users to undo or redo a specific change from the change log, updating the corresponding item in the inventory.</li>
<li><strong>clearChangeLog</strong>: A function that clears the entire change log after user confirmation.</li>
</ol>
<p>The script also exposes these functions as global variables to be accessible from other parts of the application.</p>
<p>The data flow is as follows:</p>
<ol>
<li>When an inventory item is modified, <code>logItemChanges</code> is called to compare the old and new values and log any changes.</li>
<li>The <code>logChange</code> function is used to record the change in the change log and persist it to <code>localStorage</code>.</li>
<li>The <code>renderChangeLog</code> function is called to update the change log table in the UI.</li>
<li>When a user interacts with the change log (e.g., undo/redo a change), the <code>toggleChange</code> function is called to update the inventory and the change log.</li>
<li>The <code>clearChangeLog</code> function can be used to clear the entire change log.</li>
</ol>
<h2 id="dependencies">Dependencies</h2>
<p>The <code>changeLog.js</code> script does not have any external dependencies. It relies on the following built-in JavaScript functions and browser APIs:</p>
<ul>
<li><code>Date.now()</code>: To get the current timestamp for the change log entry.</li>
<li><code>localStorage.setItem()</code> and <code>localStorage.getItem()</code>: To persist and retrieve the change log data.</li>
<li><code>document.querySelector()</code>: To select the HTML elements for rendering the change log table.</li>
</ul>
<h2 id="key-functionsclasses">Key Functions/Classes</h2>
<h3 id="logchangeitemname-field-oldvalue-newvalue-idx"><code>logChange(itemName, field, oldValue, newValue, idx)</code></h3>
<ul>
<li><strong>Purpose</strong>: Records a change in the change log and persists it to <code>localStorage</code>.</li>
<li><strong>Parameters</strong>:<ul>
<li><code>itemName</code> (string): The name of the inventory item.</li>
<li><code>field</code> (string): The field that was changed.</li>
<li><code>oldValue</code> (any): The previous value of the field.</li>
<li><code>newValue</code> (any): The new value of the field.</li>
<li><code>idx</code> (number): The index of the item in the inventory array.</li>
</ul>
</li>
<li><strong>Return Value</strong>: None.</li>
</ul>
<h3 id="logitemchangesolditem-newitem"><code>logItemChanges(oldItem, newItem)</code></h3>
<ul>
<li><strong>Purpose</strong>: Compares the old and new values of an inventory item and logs any differences using <code>logChange</code>.</li>
<li><strong>Parameters</strong>:<ul>
<li><code>oldItem</code> (object): The original item values.</li>
<li><code>newItem</code> (object): The updated item values.</li>
</ul>
</li>
<li><strong>Return Value</strong>: None.</li>
</ul>
<h3 id="renderchangelog"><code>renderChangeLog()</code></h3>
<ul>
<li><strong>Purpose</strong>: Generates the HTML table to display the change log entries.</li>
<li><strong>Parameters</strong>: None.</li>
<li><strong>Return Value</strong>: None.</li>
</ul>
<h3 id="togglechangelogidx"><code>toggleChange(logIdx)</code></h3>
<ul>
<li><strong>Purpose</strong>: Toggles a logged change between the undone and redone states, updating the corresponding item in the inventory.</li>
<li><strong>Parameters</strong>:<ul>
<li><code>logIdx</code> (number): The index of the change entry in the change log array.</li>
</ul>
</li>
<li><strong>Return Value</strong>: None.</li>
</ul>
<h3 id="clearchangelog"><code>clearChangeLog()</code></h3>
<ul>
<li><strong>Purpose</strong>: Clears all change log entries after confirmation from the user.</li>
<li><strong>Parameters</strong>: None.</li>
<li><strong>Return Value</strong>: None.</li>
</ul>
<h2 id="usage-examples">Usage Examples</h2>
<p>To use the <code>changeLog.js</code> script in your application, you can follow these steps:</p>
<ol>
<li>Include the script in your HTML file:</li>
</ol>
<pre><code class="language-html"><pre><code class="language-html"><script src="changeLog.js"></script></code></pre>
</code></pre>
<ol start="2">
<li>Call the <code>logItemChanges</code> function whenever an inventory item is modified:</li>
</ol>
<pre><code class="language-javascript"><pre><code class="language-javascript">const oldItem = { /* ... */ };
const newItem = { /* ... */ };
logItemChanges(oldItem, newItem);</code></pre>
</code></pre>
<ol start="3">
<li>Render the change log table in your application&#39;s UI:</li>
</ol>
<pre><code class="language-javascript"><pre><code class="language-javascript">renderChangeLog();</code></pre>
</code></pre>
<ol start="4">
<li>Allow users to interact with the change log by adding event listeners for the &quot;Undo&quot; and &quot;Redo&quot; buttons:</li>
</ol>
<pre><code class="language-javascript"><pre><code class="language-javascript">const undoButtons = document.querySelectorAll('.action-btn');
undoButtons.forEach((btn) => {
  btn.addEventListener('click', (event) => {
    event.stopPropagation();
    const logIdx = parseInt(event.target.getAttribute('onclick').split(',')[1]);
    toggleChange(logIdx);
  });
});</code></pre>
</code></pre>
<ol start="5">
<li>Provide a way for users to clear the change log:</li>
</ol>
<pre><code class="language-javascript"><pre><code class="language-javascript">const clearBtn = document.getElementById('clearChangeLog');
clearBtn.addEventListener('click', clearChangeLog);</code></pre>
</code></pre>
<h2 id="configuration">Configuration</h2>
<p>The <code>changeLog.js</code> script does not require any specific configuration. It relies on the <code>localStorage</code> API to persist the change log data, which is automatically handled by the script.</p>
<h2 id="error-handling">Error Handling</h2>
<p>The <code>changeLog.js</code> script does not explicitly handle errors. If any errors occur during the execution of the script&#39;s functions, they will be propagated up the call stack and can be handled by the application&#39;s global error handling mechanism.</p>
<h2 id="integration">Integration</h2>
<p>The <code>changeLog.js</code> script is designed to be integrated into a larger web application that manages an inventory. It provides a centralized way to track and manage changes made to the inventory, which can be useful for auditing, reporting, and data integrity purposes.</p>
<p>To integrate the <code>changeLog.js</code> script into your application, you will need to ensure that the necessary data and functions are accessible to the script. This may involve passing references to the <code>inventory</code> array and <code>catalogMap</code> object, as well as the <code>saveInventory</code> and <code>renderTable</code> functions.</p>
<h2 id="development-notes">Development Notes</h2>
<ol>
<li><strong>Sanitization</strong>: The <code>sanitizeHtml</code> function is used to safely display the change log entries in the HTML table. This is important to prevent potential cross-site scripting (XSS) vulnerabilities.</li>
<li><strong>Deleted Items</strong>: The script handles the case where an item is deleted from the inventory. In this case, the deleted item is temporarily stored in the change log, and can be restored by undoing the &quot;Deleted&quot; change.</li>
<li><strong>Sorted Rendering</strong>: The change log entries are sorted in reverse chronological order when rendering the table, ensuring the most recent changes are displayed first.</li>
<li><strong>Global Exposure</strong>: The key functions of the script are exposed as global variables to allow for easier integration and usage in the larger application.</li>
<li><strong>Performance Considerations</strong>: The <code>renderChangeLog</code> function could potentially become slow as the number of change log entries increases. In such cases, you may want to consider implementing pagination or lazy loading to improve the performance of the change log table.</li>
</ol>

        </main>

        <footer class="footer">
            <p>Generated from <strong>changeLog.md</strong> ‚Ä¢ StackTrackr Documentation System ‚Ä¢ Last updated: 2025-08-20</p>
        </footer>
    </div>
</body>
</html>