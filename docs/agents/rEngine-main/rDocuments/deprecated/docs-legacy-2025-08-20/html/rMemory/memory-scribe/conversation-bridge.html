<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversation Bridge - StackTrackr Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #495057 0%, #6c757d 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header-icon {
            font-size: 3em;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header .subtitle {
            font-size: 1.1em;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .header .meta {
            font-size: 0.9em;
            opacity: 0.7;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .nav-bar {
            background: #f8f9fa;
            padding: 15px 30px;
            border-bottom: 1px solid #e1e4e8;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .nav-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .nav-link {
            padding: 8px 16px;
            background: #007acc;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .content {
            padding: 40px;
            max-width: none;
        }

        .content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
            color: #2c3e50;
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .content h1 { font-size: 2.2em; border-bottom: 3px solid #007acc; padding-bottom: 10px; }
        .content h2 { font-size: 1.8em; color: #007acc; }
        .content h3 { font-size: 1.4em; color: #495057; }
        .content h4 { font-size: 1.2em; color: #6c757d; }

        .content p {
            margin-bottom: 16px;
            line-height: 1.7;
            color: #444;
        }

        .content ul, .content ol {
            margin-bottom: 16px;
            padding-left: 25px;
        }

        .content li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .content blockquote {
            border-left: 4px solid #007acc;
            background: #f8f9fa;
            margin: 20px 0;
            padding: 15px 20px;
            border-radius: 0 6px 6px 0;
        }

        .content code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            color: #e83e8c;
        }

        .content pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .content pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .content th, .content td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e1e4e8;
        }

        .content th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .content tr:hover {
            background: #f8f9fa;
        }

        .content a {
            color: #007acc;
            text-decoration: none;
            font-weight: 500;
        }

        .content a:hover {
            color: #0056b3;
            text-decoration: underline;
        }

        .footer {
            background: #f8f9fa;
            padding: 20px 30px;
            border-top: 1px solid #e1e4e8;
            text-align: center;
            color: #6c757d;
            font-size: 0.9em;
        }

        .doc-meta {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #007acc;
        }

        .doc-meta h3 {
            color: #007acc;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .meta-item {
            background: white;
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
        }

        .meta-label {
            font-weight: 600;
            color: #495057;
            font-size: 0.9em;
        }

        .meta-value {
            color: #6c757d;
            font-size: 0.9em;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .content { padding: 20px; }
            .header { padding: 20px; }
            .nav-bar { padding: 15px 20px; }
            .nav-links { justify-content: center; }
            .header .meta { flex-direction: column; gap: 10px; }
        }

        /* Category-specific colors */
        .color-vision { --primary: #9c27b0; --secondary: #7b1fa2; }
        .color-roadmap { --primary: #007acc; --secondary: #0056b3; }
        .color-engine { --primary: #2c3e50; --secondary: #34495e; }
        .color-agent { --primary: #28a745; --secondary: #198754; }
        .color-brain { --primary: #6f42c1; --secondary: #495057; }
        .color-docker { --primary: #0db7ed; --secondary: #086dd7; }
        .color-mobile { --primary: #fd7e14; --secondary: #dc3545; }
        .color-protocol { --primary: #20c997; --secondary: #198754; }
        .color-scribe { --primary: #17a2b8; --secondary: #138496; }
        .color-groq { --primary: #ffc107; --secondary: #e0a800; }
        .color-task { --primary: #dc3545; --secondary: #c82333; }
        .color-cleanup { --primary: #6c757d; --secondary: #5a6268; }
        .color-quickstart { --primary: #28a745; --secondary: #198754; }
        .color-patch { --primary: #ff6b35; --secondary: #e55a32; }
        .color-rengine { --primary: #8b5cf6; --secondary: #7c3aed; }
        .color-default { --primary: #495057; --secondary: #6c757d; }
    </style>
</head>
<body class="color-default">
    <div class="container">
        <header class="header">
            <div class="header-icon">üìÑ</div>
            <h1>Conversation Bridge</h1>
            <div class="subtitle">Documentation</div>
            <div class="meta">
                <span>üìÅ conversation-bridge.md</span>
                <span>üìÖ 2025-08-20</span>
                <span>üìä 9KB</span>
            </div>
        </header>

        <nav class="nav-bar">
            <div class="nav-links">
                <a href="../index.html" class="nav-link">üè† Documentation Home</a>
                <a href="../developmentstatus.html" class="nav-link">üìä Development Status</a>
                <a href="../rMemory/memory-scribe/conversation-bridge.md" class="nav-link">üìù View Source MD</a>
                <a href="../json/conversation-bridge.json" class="nav-link">üîß JSON Data</a>
            </div>
        </nav>

        <main class="content">
            <h1 id="conversation-bridge">Conversation Bridge</h1>
<h2 id="purpose--overview">Purpose &amp; Overview</h2>
<p>The <code>ConversationBridge</code> class provides a centralized mechanism for managing and bridging conversations between a user and an AI-powered system. It serves as a layer of abstraction, handling the creation, storage, and retrieval of conversations, as well as the integration with the AI provider and model.</p>
<p>The main goals of this script are:</p>
<ol>
<li><strong>Conversation Management</strong>: Facilitate the creation, storage, and retrieval of conversations, allowing for seamless tracking and access to conversation history.</li>
<li><strong>Context Preservation</strong>: Maintain and provide relevant context from previous messages within a conversation, enabling the AI system to better understand and respond to the user&#39;s current input.</li>
<li><strong>AI Integration</strong>: Provide a standardized interface for bridging user messages to the AI provider and model, handling the necessary formatting and enrichment of the message with contextual information.</li>
<li><strong>Metadata Storage</strong>: Allow for the storage of additional metadata associated with each conversation, enabling further customization and integration with other systems.</li>
</ol>
<p>By using the <code>ConversationBridge</code> class, developers can simplify the management of user-AI interactions, focus on the core functionality of their application, and ensure consistent and reliable conversation handling across their system.</p>
<h2 id="technical-architecture">Technical Architecture</h2>
<p>The <code>ConversationBridge</code> class consists of the following key components:</p>
<ol>
<li><p><strong>Conversation Management</strong>:</p>
<ul>
<li><code>conversations</code>: A <code>Map</code> that stores individual conversations, indexed by their unique IDs.</li>
<li><code>contextHistory</code>: An array that maintains a history of the messages exchanged within all conversations.</li>
</ul>
</li>
<li><p><strong>Conversation Operations</strong>:</p>
<ul>
<li><code>createConversation</code>: Initializes a new conversation with a unique ID and optional context.</li>
<li><code>addMessage</code>: Appends a new message to an existing conversation and updates the context history.</li>
<li><code>getConversation</code>: Retrieves a specific conversation by its ID.</li>
<li><code>getAllConversations</code>: Returns an array of all active conversations.</li>
<li><code>getContextHistory</code>: Retrieves the context history, optionally limiting the number of entries.</li>
</ul>
</li>
<li><p><strong>AI Integration</strong>:</p>
<ul>
<li><code>bridgeToAI</code>: Prepares the message for the AI provider by adding relevant context from the conversation history.</li>
</ul>
</li>
<li><p><strong>Metadata Management</strong>:</p>
<ul>
<li><code>saveToMemory</code>: Allows storing additional metadata associated with a conversation.</li>
</ul>
</li>
</ol>
<p>The data flow within the <code>ConversationBridge</code> class can be summarized as follows:</p>
<ol>
<li>A new conversation is created using <code>createConversation</code>.</li>
<li>Messages are added to the conversation using <code>addMessage</code>, which also updates the context history.</li>
<li>When bridging a message to the AI provider, <code>bridgeToAI</code> is called, which retrieves the relevant conversation and appends the contextual information.</li>
<li>Optionally, additional metadata can be associated with a conversation using <code>saveToMemory</code>.</li>
</ol>
<h2 id="dependencies">Dependencies</h2>
<p>The <code>ConversationBridge</code> class does not have any external dependencies. It is a self-contained implementation that can be used within a larger system.</p>
<h2 id="key-functionsclasses">Key Functions/Classes</h2>
<h3 id="conversationbridge-class"><code>ConversationBridge</code> Class</h3>
<p>The <code>ConversationBridge</code> class is the central component of this script.</p>
<h4 id="constructor">Constructor</h4>
<pre><code class="language-javascript"><pre><code class="language-javascript">constructor()</code></pre>
</code></pre>
<p>Initializes a new instance of the <code>ConversationBridge</code> class, setting up the internal data structures for managing conversations and the context history.</p>
<h4 id="createconversation"><code>createConversation</code></h4>
<pre><code class="language-javascript"><pre><code class="language-javascript">async createConversation(id, context = {})</code></pre>
</code></pre>
<ul>
<li><strong>Parameters</strong>:<ul>
<li><code>id</code> (string): A unique identifier for the conversation.</li>
<li><code>context</code> (object, optional): An initial context object to associate with the conversation.</li>
</ul>
</li>
<li><strong>Returns</strong>: A new conversation object with the provided ID and context.</li>
</ul>
<p>Creates a new conversation with the specified ID and optional initial context.</p>
<h4 id="addmessage"><code>addMessage</code></h4>
<pre><code class="language-javascript"><pre><code class="language-javascript">async addMessage(conversationId, message)</code></pre>
</code></pre>
<ul>
<li><strong>Parameters</strong>:<ul>
<li><code>conversationId</code> (string): The unique identifier of the conversation to which the message should be added.</li>
<li><code>message</code> (object | string): The message to be added to the conversation. Can be an object with <code>content</code>, <code>role</code>, and <code>metadata</code> properties, or a simple string representing the message content.</li>
</ul>
</li>
<li><strong>Returns</strong>: The added message entry, including the timestamp, content, role, and metadata.</li>
</ul>
<p>Adds a new message to the specified conversation and updates the context history.</p>
<h4 id="getconversation"><code>getConversation</code></h4>
<pre><code class="language-javascript"><pre><code class="language-javascript">async getConversation(conversationId)</code></pre>
</code></pre>
<ul>
<li><strong>Parameters</strong>:<ul>
<li><code>conversationId</code> (string): The unique identifier of the conversation to retrieve.</li>
</ul>
</li>
<li><strong>Returns</strong>: The conversation object with the specified ID, or <code>undefined</code> if the conversation is not found.</li>
</ul>
<p>Retrieves a specific conversation by its ID.</p>
<h4 id="getallconversations"><code>getAllConversations</code></h4>
<pre><code class="language-javascript"><pre><code class="language-javascript">async getAllConversations()</code></pre>
</code></pre>
<ul>
<li><strong>Returns</strong>: An array of all active conversation objects.</li>
</ul>
<p>Retrieves an array of all conversations managed by the <code>ConversationBridge</code> instance.</p>
<h4 id="getcontexthistory"><code>getContextHistory</code></h4>
<pre><code class="language-javascript"><pre><code class="language-javascript">async getContextHistory(limit = 100)</code></pre>
</code></pre>
<ul>
<li><strong>Parameters</strong>:<ul>
<li><code>limit</code> (number, optional): The maximum number of context history entries to retrieve (default is 100).</li>
</ul>
</li>
<li><strong>Returns</strong>: An array of the most recent context history entries, up to the specified limit.</li>
</ul>
<p>Retrieves the context history, which includes the conversation ID and message details for the most recent interactions.</p>
<h4 id="bridgetoai"><code>bridgeToAI</code></h4>
<pre><code class="language-javascript"><pre><code class="language-javascript">async bridgeToAI(provider, model, conversationId, message)</code></pre>
</code></pre>
<ul>
<li><strong>Parameters</strong>:<ul>
<li><code>provider</code> (string): The name or identifier of the AI provider.</li>
<li><code>model</code> (string): The name or identifier of the AI model to use.</li>
<li><code>conversationId</code> (string): The unique identifier of the conversation.</li>
<li><code>message</code> (string): The user&#39;s message to be sent to the AI system.</li>
</ul>
</li>
<li><strong>Returns</strong>: An object containing the provider, model, conversation ID, the contextual message, and the length of the conversation history.</li>
</ul>
<p>Prepares the user&#39;s message by adding relevant context from the conversation history, enabling the AI system to better understand and respond to the current input.</p>
<h4 id="savetomemory"><code>saveToMemory</code></h4>
<pre><code class="language-javascript"><pre><code class="language-javascript">async saveToMemory(conversationId, data)</code></pre>
</code></pre>
<ul>
<li><strong>Parameters</strong>:<ul>
<li><code>conversationId</code> (string): The unique identifier of the conversation.</li>
<li><code>data</code> (object): Additional metadata to be associated with the conversation.</li>
</ul>
</li>
</ul>
<p>Stores additional metadata associated with the specified conversation.</p>
<h2 id="usage-examples">Usage Examples</h2>
<ol>
<li>Creating a new conversation:</li>
</ol>
<pre><code class="language-javascript"><pre><code class="language-javascript">const bridge = new ConversationBridge();
const conversation = await bridge.createConversation('123', { userId: 'user-001' });
console.log(conversation);</code></pre>
</code></pre>
<ol start="2">
<li>Adding a message to a conversation:</li>
</ol>
<pre><code class="language-javascript"><pre><code class="language-javascript">const messageEntry = await bridge.addMessage('123', {
  content: 'Hello, how are you?',
  role: 'user',
  metadata: { device: 'mobile' }
});
console.log(messageEntry);</code></pre>
</code></pre>
<ol start="3">
<li>Retrieving a conversation:</li>
</ol>
<pre><code class="language-javascript"><pre><code class="language-javascript">const conversation = await bridge.getConversation('123');
console.log(conversation);</code></pre>
</code></pre>
<ol start="4">
<li>Bridging a message to the AI system:</li>
</ol>
<pre><code class="language-javascript"><pre><code class="language-javascript">const aiResponse = await bridge.bridgeToAI('openai', 'gpt-3.5-turbo', '123', 'What is the capital of France?');
console.log(aiResponse);</code></pre>
</code></pre>
<ol start="5">
<li>Storing additional metadata for a conversation:</li>
</ol>
<pre><code class="language-javascript"><pre><code class="language-javascript">await bridge.saveToMemory('123', { priority: 'high' });</code></pre>
</code></pre>
<h2 id="configuration">Configuration</h2>
<p>The <code>ConversationBridge</code> class does not require any specific configuration options or environment variables. It is designed to be a self-contained component that can be easily integrated into a larger system.</p>
<h2 id="error-handling">Error Handling</h2>
<p>The <code>ConversationBridge</code> class handles the following errors:</p>
<ul>
<li><code>Error(&#39;Conversation ${conversationId} not found&#39;)</code>: Thrown when attempting to access a conversation that does not exist.</li>
</ul>
<p>These errors can be caught and handled by the calling code as needed.</p>
<h2 id="integration">Integration</h2>
<p>The <code>ConversationBridge</code> class is designed to be a standalone component that can be easily integrated into a larger system. It can be used as part of a chatbot, virtual assistant, or any other application that requires the management and bridging of user-AI conversations.</p>
<p>To integrate the <code>ConversationBridge</code> into your system, you can simply create an instance of the class and use its methods to manage conversations and bridge messages to the AI provider. The class does not have any external dependencies, making it easy to include in your project.</p>
<h2 id="development-notes">Development Notes</h2>
<ul>
<li>The <code>ConversationBridge</code> class uses a <code>Map</code> to store conversations, which provides efficient lookup and access to individual conversations.</li>
<li>The <code>contextHistory</code> array is used to maintain a record of all messages exchanged across conversations, enabling the retrieval of recent context for a given conversation.</li>
<li>The <code>bridgeToAI</code> method is responsible for preparing the user&#39;s message by adding relevant context from the conversation history. This ensures that the AI system has the necessary information to provide a more contextual and relevant response.</li>
<li>The <code>saveToMemory</code> method allows for the storage of additional metadata associated with a conversation, enabling further customization and integration with other systems.</li>
<li>The class is designed to be asynchronous, allowing for efficient and non-blocking operation in a concurrent environment.</li>
</ul>
<p>Overall, the <code>ConversationBridge</code> class provides a robust and extensible foundation for managing user-AI conversations, making it a valuable component in the development of conversational applications.</p>

        </main>

        <footer class="footer">
            <p>Generated from <strong>conversation-bridge.md</strong> ‚Ä¢ StackTrackr Documentation System ‚Ä¢ Last updated: 2025-08-20</p>
        </footer>
    </div>
</body>
</html>