<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>metals-dev.js Documentation - StackTrackr Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #495057 0%, #6c757d 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header-icon {
            font-size: 3em;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header .subtitle {
            font-size: 1.1em;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .header .meta {
            font-size: 0.9em;
            opacity: 0.7;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .nav-bar {
            background: #f8f9fa;
            padding: 15px 30px;
            border-bottom: 1px solid #e1e4e8;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .nav-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .nav-link {
            padding: 8px 16px;
            background: #007acc;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .content {
            padding: 40px;
            max-width: none;
        }

        .content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
            color: #2c3e50;
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .content h1 { font-size: 2.2em; border-bottom: 3px solid #007acc; padding-bottom: 10px; }
        .content h2 { font-size: 1.8em; color: #007acc; }
        .content h3 { font-size: 1.4em; color: #495057; }
        .content h4 { font-size: 1.2em; color: #6c757d; }

        .content p {
            margin-bottom: 16px;
            line-height: 1.7;
            color: #444;
        }

        .content ul, .content ol {
            margin-bottom: 16px;
            padding-left: 25px;
        }

        .content li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .content blockquote {
            border-left: 4px solid #007acc;
            background: #f8f9fa;
            margin: 20px 0;
            padding: 15px 20px;
            border-radius: 0 6px 6px 0;
        }

        .content code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            color: #e83e8c;
        }

        .content pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .content pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .content th, .content td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e1e4e8;
        }

        .content th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .content tr:hover {
            background: #f8f9fa;
        }

        .content a {
            color: #007acc;
            text-decoration: none;
            font-weight: 500;
        }

        .content a:hover {
            color: #0056b3;
            text-decoration: underline;
        }

        .footer {
            background: #f8f9fa;
            padding: 20px 30px;
            border-top: 1px solid #e1e4e8;
            text-align: center;
            color: #6c757d;
            font-size: 0.9em;
        }

        .doc-meta {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #007acc;
        }

        .doc-meta h3 {
            color: #007acc;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .meta-item {
            background: white;
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
        }

        .meta-label {
            font-weight: 600;
            color: #495057;
            font-size: 0.9em;
        }

        .meta-value {
            color: #6c757d;
            font-size: 0.9em;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .content { padding: 20px; }
            .header { padding: 20px; }
            .nav-bar { padding: 15px 20px; }
            .nav-links { justify-content: center; }
            .header .meta { flex-direction: column; gap: 10px; }
        }

        /* Category-specific colors */
        .color-vision { --primary: #9c27b0; --secondary: #7b1fa2; }
        .color-roadmap { --primary: #007acc; --secondary: #0056b3; }
        .color-engine { --primary: #2c3e50; --secondary: #34495e; }
        .color-agent { --primary: #28a745; --secondary: #198754; }
        .color-brain { --primary: #6f42c1; --secondary: #495057; }
        .color-docker { --primary: #0db7ed; --secondary: #086dd7; }
        .color-mobile { --primary: #fd7e14; --secondary: #dc3545; }
        .color-protocol { --primary: #20c997; --secondary: #198754; }
        .color-scribe { --primary: #17a2b8; --secondary: #138496; }
        .color-groq { --primary: #ffc107; --secondary: #e0a800; }
        .color-task { --primary: #dc3545; --secondary: #c82333; }
        .color-cleanup { --primary: #6c757d; --secondary: #5a6268; }
        .color-quickstart { --primary: #28a745; --secondary: #198754; }
        .color-patch { --primary: #ff6b35; --secondary: #e55a32; }
        .color-rengine { --primary: #8b5cf6; --secondary: #7c3aed; }
        .color-default { --primary: #495057; --secondary: #6c757d; }
    </style>
</head>
<body class="color-default">
    <div class="container">
        <header class="header">
            <div class="header-icon">üìÑ</div>
            <h1>metals-dev.js Documentation</h1>
            <div class="subtitle">Documentation</div>
            <div class="meta">
                <span>üìÅ metals-dev.md</span>
                <span>üìÖ 2025-08-20</span>
                <span>üìä 6KB</span>
            </div>
        </header>

        <nav class="nav-bar">
            <div class="nav-links">
                <a href="../index.html" class="nav-link">üè† Documentation Home</a>
                <a href="../developmentstatus.html" class="nav-link">üìä Development Status</a>
                <a href="../rAgents/rLab/serverless-plugin/docker-serverless/api/providers/metals-dev.md" class="nav-link">üìù View Source MD</a>
                <a href="../json/metals-dev.json" class="nav-link">üîß JSON Data</a>
            </div>
        </nav>

        <main class="content">
            <h1 id="metals-devjs-documentation">metals-dev.js Documentation</h1>
<h2 id="purpose--overview">Purpose &amp; Overview</h2>
<p>The <code>metals-dev.js</code> script provides a <code>MetalsDevProvider</code> class that serves as a wrapper around the Metals.dev API. This allows developers to easily fetch current spot prices for various precious metals, such as gold, silver, platinum, and palladium, in different currencies. The normalized response data can then be used within a larger application or system.</p>
<h2 id="technical-architecture">Technical Architecture</h2>
<p>The <code>MetalsDevProvider</code> class has the following key components:</p>
<ol>
<li><strong>Constructor</strong>: Initializes the class with the Metals.dev API base URL and the API key from the environment variables.</li>
<li><strong><code>fetchPrice</code></strong>: An asynchronous method that makes a GET request to the Metals.dev API to fetch the current spot price for a given metal and currency. It handles error cases and normalizes the response data to a consistent schema.</li>
<li><strong><code>isHealthy</code></strong>: An asynchronous method that checks the health of the Metals.dev API by attempting to fetch the gold spot price in USD. This can be used for monitoring or failover purposes.</li>
</ol>
<p>The script exports a singleton instance of the <code>MetalsDevProvider</code> class, allowing it to be easily imported and used throughout the application.</p>
<h2 id="dependencies">Dependencies</h2>
<p>The <code>metals-dev.js</code> script has the following dependencies:</p>
<ul>
<li><code>axios</code>: A popular HTTP client library for making API requests.</li>
</ul>
<h2 id="key-functionsclasses">Key Functions/Classes</h2>
<h3 id="metalsdevprovider-class"><code>MetalsDevProvider</code> Class</h3>
<p><strong>Constructor</strong>:</p>
<ul>
<li><strong>Parameters</strong>: None</li>
<li><strong>Returns</strong>: A new instance of the <code>MetalsDevProvider</code> class.</li>
</ul>
<p><strong><code>fetchPrice</code></strong>:</p>
<ul>
<li><strong>Parameters</strong>:<ul>
<li><code>metal</code> (string): The name of the metal to fetch the spot price for (e.g., &quot;gold&quot;, &quot;silver&quot;, &quot;platinum&quot;, &quot;palladium&quot;).</li>
<li><code>currency</code> (string, optional): The currency to fetch the spot price in (default is &quot;USD&quot;).</li>
</ul>
</li>
<li><strong>Returns</strong>: An object with the following properties:<ul>
<li><code>ts</code> (string): The current timestamp in ISO format.</li>
<li><code>metal</code> (string): The name of the metal, in lowercase.</li>
<li><code>currency</code> (string): The currency, in uppercase.</li>
<li><code>unit</code> (string): The unit of measurement, which is always &quot;toz&quot; (troy ounce).</li>
<li><code>price</code> (number): The current spot price.</li>
<li><code>ask</code> (number): The current ask price.</li>
<li><code>bid</code> (number): The current bid price.</li>
<li><code>high24h</code> (number): The 24-hour high price.</li>
<li><code>low24h</code> (number): The 24-hour low price.</li>
<li><code>change</code> (number): The price change since the previous update.</li>
<li><code>changePct</code> (number): The percentage price change since the previous update.</li>
<li><code>provider</code> (string): The name of the data provider, which is &quot;metals.dev&quot;.</li>
<li><code>source</code> (string): The source of the data, which is &quot;spot&quot;.</li>
<li><code>raw</code> (object): The raw response data from the Metals.dev API.</li>
</ul>
</li>
</ul>
<p><strong><code>isHealthy</code></strong>:</p>
<ul>
<li><strong>Parameters</strong>: None</li>
<li><strong>Returns</strong>: A boolean value indicating whether the Metals.dev API is currently healthy and accessible.</li>
</ul>
<h2 id="usage-examples">Usage Examples</h2>
<p>Here&#39;s an example of how to use the <code>MetalsDevProvider</code> class to fetch the current gold spot price in USD:</p>
<pre><code class="language-javascript"><pre><code class="language-javascript">const metalsDevProvider = require('./metals-dev');

(async () => {
  try {
    const goldPrice = await metalsDevProvider.fetchPrice('gold', 'USD');
    console.log(goldPrice);
  } catch (error) {
    console.error('Error fetching gold price:', error.message);
  }
})();</code></pre>
</code></pre>
<p>This will output an object with the current gold spot price information:</p>
<pre><code class="language-json"><pre><code class="language-json">{
  "ts": "2023-04-19T12:34:56.789Z",
  "metal": "gold",
  "currency": "USD",
  "unit": "toz",
  "price": 1,980.25,
  "ask": 1,980.50,
  "bid": 1,980.00,
  "high24h": 1,985.00,
  "low24h": 1,975.75,
  "change": 5.50,
  "changePct": 0.28,
  "provider": "metals.dev",
  "source": "spot",
  "raw": {
    "price": 1980.25,
    "ask": 1980.50,
    "bid": 1980.00,
    "high": 1985.00,
    "low": 1975.75,
    "change": 5.50,
    "change_percent": 0.28
  }
}</code></pre>
</code></pre>
<h2 id="configuration">Configuration</h2>
<p>The <code>MetalsDevProvider</code> class requires the <code>METALS_DEV_API_KEY</code> environment variable to be set with a valid Metals.dev API key. This API key is used to authenticate the requests to the Metals.dev API.</p>
<h2 id="error-handling">Error Handling</h2>
<p>The <code>MetalsDevProvider</code> class handles errors in the following ways:</p>
<ol>
<li>If the <code>METALS_DEV_API_KEY</code> environment variable is not set, the <code>fetchPrice</code> method will throw an error with the message &quot;Metals.dev API key not configured&quot;.</li>
<li>If there is an error while making the API request, the <code>fetchPrice</code> method will throw an error with the message &quot;Metals.dev API error: [error message]&quot;.</li>
</ol>
<p>In both cases, the calling code should handle these errors appropriately, such as by logging the error, retrying the request, or displaying a user-friendly error message.</p>
<h2 id="integration">Integration</h2>
<p>The <code>metals-dev.js</code> script can be integrated into a larger application or system that requires access to current precious metal spot prices. For example, it could be used in a financial dashboard, a trading platform, or a risk management system.</p>
<h2 id="development-notes">Development Notes</h2>
<ul>
<li>The <code>MetalsDevProvider</code> class is designed as a singleton, which means there will only be a single instance of the class throughout the application. This ensures that the API key is only loaded from the environment variables once and is consistently used across the application.</li>
<li>The <code>fetchPrice</code> method uses the <code>axios</code> library to make the API request and handles any errors that may occur during the request. It also applies a 5-second timeout to the request to prevent the application from getting stuck waiting for a response.</li>
<li>The <code>isHealthy</code> method is provided as a way to check the health of the Metals.dev API. This can be useful for monitoring the availability of the API or implementing failover mechanisms in the application.</li>
<li>The response data from the Metals.dev API is normalized to a consistent schema, which makes it easier to integrate the data into the larger application or system.</li>
</ul>

        </main>

        <footer class="footer">
            <p>Generated from <strong>metals-dev.md</strong> ‚Ä¢ StackTrackr Documentation System ‚Ä¢ Last updated: 2025-08-20</p>
        </footer>
    </div>
</body>
</html>