{
  "metadata": {
    "version": "1.0",
    "created": "2025-08-16",
    "purpose": "Issue tracking and recovery system for StackTrackr agentic operating system",
    "description": "Centralized log of recent issues, changes, and rollback procedures for rapid recovery",
    "retention_policy": "Keep last 50 issues, archive older entries",
    "patch_notes_location": "/patchnotes",
    "patch_naming_format": "PATCH-[version].[extension]"
  },
  "issues": [
    {
      "issue_id": "20250816_003",
      "title": "Multiple JavaScript Errors Preventing Application Load",
      "category": "bug_fix",
      "priority": "critical",
      "date": "2025-08-16",
      "agent": "github_copilot",
      "status": "resolved",
      "description": "Application failing to load with multiple JS errors: exportCsv undefined, CatalogProvider duplicate variable, encryption.isEncryptionSetup undefined.",
      "files_affected": [
        "js/events.js",
        "js/inventory.js",
        "js/catalog-providers.js", 
        "js/catalog-api.js",
        "js/encryption.js"
      ],
      "changes_made": [
        "Added missing export functions (exportCsv, exportJson, exportPdf) to js/inventory.js",
        "Removed duplicate CatalogProvider class definition from js/catalog-providers.js",
        "Fixed encryption method call in js/events.js to use hasMasterPassword() instead of isEncryptionSetup()"
      ],
      "root_cause": "Missing function definitions and duplicate variable declarations",
      "symptoms": [
        "ReferenceError: Can't find variable: exportCsv",
        "SyntaxError: Can't create duplicate variable: 'CatalogProvider'",
        "TypeError: encryption.isEncryptionSetup is not a function"
      ],
      "testing_status": "fully_validated_by_user",
      "rollback_procedure": "Revert changes to js/inventory.js, js/catalog-providers.js, and js/events.js if issues persist",
      "related_functions": [
        "exportCsv",
        "exportJson", 
        "exportPdf",
        "CatalogProvider",
        "encryption.hasMasterPassword"
      ],
      "prevention_notes": "Add pre-commit validation to check for undefined function references and duplicate class declarations",
      "solution_validation": "âœ… Application loads successfully, Files modal opens/closes properly, CSV import/export functionality confirmed working"
    },
    {
      "issue_id": "20250816_002",
      "title": "Updated COPILOT_INSTRUCTIONS.md to Point to AGENTS.md",
      "category": "configuration",
      "priority": "low",
      "date": "2025-08-16",
      "agent": "github_copilot",
      "status": "resolved",
      "description": "Updated root COPILOT_INSTRUCTIONS.md file to direct agents to AGENTS.md for primary workflow guidance instead of referencing various .ai files.",
      "files_affected": [
        "COPILOT_INSTRUCTIONS.md"
      ],
      "changes_made": [
        "Simplified instructions to point primarily to AGENTS.md",
        "Removed references to specific .ai files in agents folder",
        "Streamlined workflow guidance for consistency"
      ],
      "root_cause": "User request to centralize workflow guidance through AGENTS.md",
      "symptoms": [
        "Multiple workflow reference points causing confusion"
      ],
      "testing_status": "complete",
      "rollback_procedure": "Revert COPILOT_INSTRUCTIONS.md to previous version with .ai file references",
      "related_functions": [],
      "prevention_notes": "Maintain single source of truth for agent workflow guidance"
    },
    {
      "issue_id": "20250816_001",
      "title": "Files Modal Not Closing - Missing Body Overflow Management",
      "category": "bug_fix", 
      "priority": "high",
      "date": "2025-08-16",
      "agent": "github_copilot",
      "status": "blocked_by_other_errors",
      "description": "Files modal would stay open when clicking X button. Root cause: showFilesModal/hideFilesModal functions missing document.body.style.overflow management and global modal system integration. NOTE: Currently blocked by application errors - exportCsv undefined, CatalogProvider duplicate variable, encryption errors.",
      "files_affected": [
        "js/api.js"
      ],
      "changes_made": [
        "Updated showFilesModal to use openModalById and set body overflow hidden",
        "Updated hideFilesModal to use closeModalById and restore body overflow",
        "Added error handling for body overflow operations"
      ],
      "root_cause": "Incomplete modal implementation after recent render function rework",
      "symptoms": [
        "Files modal X button not responsive",
        "Modal stays open despite click events",
        "Background scrolling not properly prevented"
      ],
      "testing_status": "pending_user_confirmation",
      "rollback_procedure": "Revert api.js showFilesModal/hideFilesModal functions to simple display style only",
      "related_functions": [
        "showFilesModal",
        "hideFilesModal", 
        "openModalById",
        "closeModalById"
      ],
      "prevention_notes": "All modal functions must include body overflow management and global modal system integration for consistency"
    }
  ],
  "categories": {
    "bug_fix": {
      "description": "Fixes for broken functionality",
      "color": "#d73a49",
      "priority": "high"
    },
    "performance": {
      "description": "Performance optimizations and improvements",
      "color": "#28a745",
      "priority": "medium"
    },
    "feature": {
      "description": "New feature implementations",
      "color": "#0366d6",
      "priority": "medium"
    },
    "refactor": {
      "description": "Code structure improvements without functionality changes",
      "color": "#6f42c1",
      "priority": "low"
    },
    "security": {
      "description": "Security-related fixes and improvements",
      "color": "#e36209",
      "priority": "critical"
    },
    "dependency": {
      "description": "Library updates and dependency changes",
      "color": "#586069",
      "priority": "low"
    },
    "configuration": {
      "description": "Settings and configuration changes",
      "color": "#f66a0a",
      "priority": "low"
    }
  },
  "schema": {
    "issue": {
      "id": "string - Unique identifier (timestamp-based)",
      "timestamp": "string - ISO datetime of issue creation",
      "agent": "string - Agent that worked on the issue (GPT-4, Claude, Gemini, etc.)",
      "category": "string - Issue category from categories above",
      "title": "string - Brief descriptive title",
      "description": "string - Detailed description of the issue and what was done",
      "files_affected": "array - List of files that were changed",
      "diff": "object - Before/after code changes for each file",
      "rollback_procedure": "string - Step-by-step instructions to undo changes",
      "risk_level": "string - low|medium|high|critical",
      "testing_performed": "string - Description of testing done",
      "side_effects": "array - Any unexpected consequences or impacts",
      "related_functions": "array - Functions affected (links to functions.json)",
      "dependencies": "array - Other issues or changes this depends on",
      "resolution_status": "string - resolved|monitoring|failed|rolled_back",
      "recovery_notes": "string - Additional notes for file recovery",
      "performance_impact": "string - Performance changes observed",
      "validation_checklist": "array - Verification steps completed",
      "next_actions": "array - Follow-up tasks or monitoring needed"
    },
    "diff_entry": {
      "file": "string - File path",
      "before": "string - Original code/content",
      "after": "string - Modified code/content",
      "line_numbers": "object - {start: number, end: number}",
      "change_type": "string - add|modify|delete|rename"
    }
  },
  "quick_recovery": {
    "last_24_hours": [],
    "critical_changes": [],
    "failed_deployments": []
  },
  "instructions": {
    "for_agents": "MANDATORY: When working on any issue, create an entry in this file before making changes and update after completion. Include complete diff and rollback procedures.",
    "issue_logging": "Log every change with enough detail for another agent to understand and reverse the changes if needed",
    "recovery_focus": "Emphasize rollback procedures and file recovery information to prevent data loss",
    "monitoring": "Mark issues requiring ongoing monitoring and include validation steps",
    "patch_notes": "For significant changes (version bumps, major features, critical fixes), create corresponding patch note in /patchnotes folder using format PATCH-[version].[md|ai]"
  },
  "templates": {
    "bug_fix_template": {
      "id": "YYYY-MM-DD-HH-MM-SS-bug",
      "timestamp": "2025-08-16T10:30:00Z",
      "agent": "Claude",
      "category": "bug_fix",
      "title": "Fixed table sorting breaking with large datasets",
      "description": "Replaced inefficient sorting algorithm with optimized version that handles 10k+ rows",
      "files_affected": ["js/inventory.js", "js/utils.js"],
      "diff": {
        "js/inventory.js": {
          "before": "// old sorting code",
          "after": "// new sorting code",
          "line_numbers": {"start": 145, "end": 167},
          "change_type": "modify"
        }
      },
      "rollback_procedure": "1. Revert js/inventory.js lines 145-167 to original sorting method 2. Clear localStorage cache 3. Refresh page to test",
      "risk_level": "medium",
      "testing_performed": "Tested with 15k rows, confirmed sorting performance improved by 300%",
      "side_effects": [],
      "related_functions": ["sortTable", "renderTable"],
      "dependencies": [],
      "resolution_status": "resolved",
      "recovery_notes": "Original code backed up in git commit abc123",
      "performance_impact": "Sorting time reduced from 3s to 1s for large datasets",
      "validation_checklist": ["Sort functionality works", "No regressions in filtering", "Performance improved"],
      "next_actions": ["Monitor for edge cases", "Consider indexing for further optimization"],
      "patch_note": "patchnotes/PATCH-3.04.88.md"
    }
  }
}