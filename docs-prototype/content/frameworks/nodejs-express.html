<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HexTrackr - Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta17/dist/css/tabler.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link href="../../styles/shared/base.css" rel="stylesheet">
    <link href="../../styles/shared/header.css" rel="stylesheet">
    <link href="../css/docs-tabler.css" rel="stylesheet">
</head>
<body>
    <div class="page">
        <!-- Shared Header -->
        <div id="headerContainer"></div>
        
        <div class="page-wrapper">
            <div class="page-body">
                <div class="container-xl">
                    <div class="row g-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <h1>Node.js and Express Framework</h1>
<p>The backend of the HexTrackr application is built on Node.js using the Express.js framework. This combination provides a robust, minimalist, and efficient foundation for the web server, API, and middleware.</p>
<h2>Core Concepts</h2>
<ul>
<li><strong><code>server.js</code></strong>: This is the main entry point for the backend application. It initializes the Express server, configures middleware, defines all API routes, and starts listening for incoming requests.</li>
<li><strong>Asynchronous Nature</strong>: Node.js allows the server to handle many connections concurrently without getting blocked, which is ideal for I/O-heavy operations like database queries.</li>
</ul>
<h2>Express.js Integration</h2>
<p>Express.js simplifies the process of building a web server in Node.js. Hereâ€™s how it&#39;s used in HexTrackr:</p>
<h3>1. Server Initialization</h3>
<p>An Express application is instantiated at the beginning of <code>server.js</code>:</p>
<pre><code class="language-javascript">const express = require(&#39;express&#39;);
const app = express();
const PORT = process.env.PORT || 8080;

// ... middleware and routes ...

app.listen(PORT, () =&gt; {
    console.log(`Server is running on port ${PORT}`);
});
</code></pre>
<h3>2. Middleware</h3>
<p>Middleware functions are used to process incoming requests before they reach their final route handler. HexTrackr uses several key middleware components:</p>
<ul>
<li><strong><code>cors</code></strong>: Enables Cross-Origin Resource Sharing, allowing the frontend (which may be served from a different origin in some development scenarios) to make requests to the backend API.</li>
<li><strong><code>compression</code></strong>: Compresses HTTP responses before sending them to the client, which reduces bandwidth usage and improves performance.</li>
<li><strong><code>express.json()</code></strong>: Parses incoming requests with JSON payloads. This is essential for handling data sent from the frontend in POST or PUT requests.</li>
<li><strong><code>express.urlencoded()</code></strong>: Parses incoming requests with URL-encoded payloads.</li>
<li><strong><code>express.static()</code></strong>: Serves static files such as HTML, CSS, and client-side JavaScript. In HexTrackr, this is used to serve the main application pages and assets.</li>
<li><strong>Custom Security Middleware</strong>: A custom middleware function is used to set important security headers (<code>X-Content-Type-Options</code>, <code>X-Frame-Options</code>, etc.) on all responses to enhance application security.</li>
</ul>
<pre><code class="language-javascript">// Middleware setup in server.js
app.use(cors());
app.use(compression());
app.use(express.json());
app.use(express.static(path.join(__dirname, &#39;..&#39;))); // Serves frontend files
</code></pre>
<h3>3. Routing</h3>
<p>Express&#39;s routing system is used to map HTTP requests (e.g., <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code>) to specific handler functions. All API endpoints are defined in <code>server.js</code>.</p>
<ul>
<li><strong>RESTful API</strong>: The routes are designed following REST principles. For example, <code>GET /api/tickets</code> fetches all tickets, while <code>POST /api/tickets</code> creates a new one.</li>
<li><strong>Route Handlers</strong>: Each route has a handler function that takes <code>request</code> and <code>response</code> objects as arguments. These functions contain the logic for interacting with the database and sending a response back to the client.</li>
</ul>
<p>Example of a <code>GET</code> route for vulnerabilities:</p>
<pre><code class="language-javascript">app.get(&#39;/api/vulnerabilities&#39;, (req, res) =&gt; {
    // Logic to query the database for vulnerabilities
    // ...
    db.all(query, params, (err, rows) =&gt; {
        if (err) {
            res.status(500).json({ error: err.message });
            return;
        }
        res.json({ data: rows });
    });
});
</code></pre>
<h3>4. Serving Static Files</h3>
<p>Express serves the frontend of the application (<code>tickets.html</code>, <code>vulnerabilities.html</code>, and all associated CSS and JavaScript files) using the <code>express.static</code> middleware. This allows the same server to provide both the API and the client-side application.</p>
<pre><code class="language-javascript">// Serve static files from the project&#39;s root directory
app.use(express.static(path.join(__dirname, &#39;..&#39;)));
</code></pre>
<p>This line tells Express to treat the project&#39;s root directory as a public folder from which it can serve files directly.</p>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Shared Footer -->
    <div id="footerContainer"></div>

    <script src="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta17/dist/js/tabler.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <!-- Load shared header and footer -->
    <script src="../../scripts/shared/header-loader.js"></script>
    <script src="../../scripts/shared/footer-loader.js"></script>
</body>
</html>
