<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HexTrackr - Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta17/dist/css/tabler.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link href="../../styles/shared/base.css" rel="stylesheet">
    <link href="../../styles/shared/header.css" rel="stylesheet">
    <link href="../css/docs-tabler.css" rel="stylesheet">
</head>
<body>
    <div class="page">
        <!-- Shared Header -->
        <div id="headerContainer"></div>
        
        <div class="page-wrapper">
            <div class="page-body">
                <div class="container-xl">
                    <div class="row g-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <h1>Documentation System Architecture</h1>
<p>This document outlines the architecture and workflow of the HexTrackr documentation system. The system is designed to be semi-automated, leveraging both static analysis and AI-powered content generation to produce and maintain comprehensive documentation.</p>
<h2>1. Overview</h2>
<p>The documentation system follows a &quot;docs-as-code&quot; philosophy. The source content is written in Markdown and stored in the <code>docs-source/</code> directory. A set of Node.js scripts process these source files to generate the final, viewable HTML documentation portal located in <code>docs-prototype/</code>.</p>
<p>The core components of the system are:</p>
<ul>
<li><strong>Source Content (<code>docs-source/</code>)</strong>: The single source of truth for all documentation, written in Markdown.</li>
<li><strong>Generation Scripts (<code>docs-prototype/</code>)</strong>: A collection of scripts responsible for analyzing the codebase and generating/updating documentation.</li>
<li><strong>HTML Documentation Portal (<code>docs-prototype/</code>)</strong>: The final, static HTML website that is served to users.</li>
</ul>
<h2>2. Content Generation Workflow</h2>
<p>The documentation generation process has evolved over time, resulting in a layered set of tools.</p>
<h3>Step 1: Initial Scaffolding and Analysis (<code>generate-docs.js</code>)</h3>
<p>The foundational script, <code>generate-docs.js</code>, performs a static analysis of the codebase.</p>
<ul>
<li><strong>Purpose</strong>: To scan for basic patterns and create initial HTML documentation stubs.</li>
<li><strong>Functionality</strong>:<ul>
<li>Scans for API endpoints in <code>server.js</code>.</li>
<li>Identifies JavaScript functions across <code>.js</code> files.</li>
<li>Detects the usage of major frameworks (Bootstrap, Tabler.io, AG Grid, ApexCharts).</li>
</ul>
</li>
<li><strong>Output</strong>: Generates basic HTML files in the <code>docs-prototype/content/</code> directory. This script is primarily for initial setup and is less frequently used now.</li>
</ul>
<h3>Step 2: AI-Powered Content Generation (<code>gemini-docs-generator.js</code>)</h3>
<p>To enhance the quality and depth of the documentation, an AI-powered script was introduced.</p>
<ul>
<li><strong>Purpose</strong>: To generate rich, detailed Markdown content from scratch by analyzing the codebase with Google&#39;s Gemini AI.</li>
<li><strong>Functionality</strong>:<ul>
<li>Scans the entire codebase, including backend, frontend, and configuration files.</li>
<li>Sends the code context to the Gemini API with a master prompt that defines the required structure, tone, and quality standards.</li>
<li>Generates comprehensive documentation for specific sections like API, architecture, and security.</li>
</ul>
</li>
<li><strong>Output</strong>: Creates new <code>.md</code> files in the <code>docs-source/</code> directory. This script is ideal for generating the first draft of a new documentation section.</li>
</ul>
<h3>Step 3: AI-Powered Content Updating (<code>enhanced-gemini-docs-generator.js</code>)</h3>
<p>The most advanced script in the toolchain is designed for sustainable, long-term maintenance of the documentation.</p>
<ul>
<li><strong>Purpose</strong>: To intelligently <em>update</em> existing Markdown files rather than overwriting them, preserving manual changes and structure.</li>
<li><strong>Functionality</strong>:<ul>
<li>Reads an existing <code>.md</code> file from <code>docs-source/</code>.</li>
<li>Scans the codebase for the most current context.</li>
<li>Sends both the existing documentation and the new code context to the Gemini API.</li>
<li>The AI is instructed to update the content for accuracy and completeness while preserving the document&#39;s structure and headings.</li>
</ul>
</li>
<li><strong>Output</strong>: Overwrites the existing <code>.md</code> file in <code>docs-source/</code> with the improved version and creates a timestamped backup of the original file. This is the primary script used for ongoing documentation maintenance.</li>
</ul>
<h2>3. Directory Structure</h2>
<pre><code class="language-plaintext">.
├── docs-prototype/
│   ├── enhanced-gemini-docs-generator.js  # (Current) Updates .md files
│   ├── gemini-docs-generator.js         # (Legacy) Generates .md files from scratch
│   ├── generate-docs.js                 # (Legacy) Generates .html files from code
│   ├── index.html                       # The main documentation portal page
│   ├── css/                             # Styles for the portal
│   └── js/                              # JavaScript for the portal
│   └── content/                         # Final generated HTML content is stored here
│
└── docs-source/
    ├── index.md                         # Source for the main portal page
    ├── api/                             # Source .md files for API docs
    ├── architecture/                    # Source .md files for architecture
    └── ...                              # Other documentation categories
</code></pre>
<h2>4. Deployment</h2>
<p>The documentation portal is a static website. To deploy it, the entire <code>docs-prototype/</code> directory can be served by any static web server, such as Nginx or Apache. The main application&#39;s <code>server.js</code> is already configured to serve this directory at the <code>/docs-prototype</code> route, making it accessible alongside the main application.</p>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Shared Footer -->
    <div id="footerContainer"></div>

    <script src="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta17/dist/js/tabler.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <!-- Load shared header and footer -->
    <script src="../../scripts/shared/header-loader.js"></script>
    <script src="../../scripts/shared/footer-loader.js"></script>
</body>
</html>
