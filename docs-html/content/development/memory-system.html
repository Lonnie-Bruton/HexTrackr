<!-- Fragment template for documentation content injected by docs-tabler.js -->
<section class="doc-fragment">
    <h1>Memory System - Perfect Continuity Architecture</h1>
<p>This document outlines HexTrackr&#39;s advanced <code>.rMemory</code> system - achieving <strong>perfect continuity</strong> where every chat feels like &quot;we never stopped working together&quot;.</p>
<h2>System Overview</h2>
<p>HexTrackr implements a comprehensive memory architecture combining:</p>
<ul>
<li><strong><code>.rMemory</code> Scribes System</strong>: Specialized AI analysis tools for frustration learning and context preservation</li>
<li><strong>Memento MCP Integration</strong>: Neo4j-backed persistent memory with semantic search</li>
<li><strong>Perfect Continuity Protocols</strong>: Instant project context loading and sprint awareness</li>
<li><strong>Frustration Prevention Matrix</strong>: Learning from pain points to prevent repeated issues</li>
<li><strong>Agent Context Loading</strong>: Complete briefings for seamless collaboration</li>
</ul>
<h2>Core Components</h2>
<h3>1. <strong>Perfect Continuity Experience</strong></h3>
<ul>
<li><strong>Agent Context Loader</strong>: Comprehensive briefings with project state, frustrations, roadmap</li>
<li><strong>Boot Protocols</strong>: Instant context loading for any new chat session</li>
<li><strong>Memory-First Search</strong>: Always start with project memory before planning</li>
<li><strong>Relationship Continuity</strong>: Consistent collaborative tone and preferences</li>
</ul>
<h3>2. <strong>Frustration Learning &amp; Prevention</strong></h3>
<ul>
<li><strong>Frustration Matrix</strong>: Claude Opus-powered analysis of development pain points</li>
<li><strong>Prevention Strategies</strong>: Automatic generation of solutions for recurring issues</li>
<li><strong>Pain Point Classification</strong>: Categorization and searchable storage of frustrations</li>
<li><strong>Time Impact Analysis</strong>: Productivity impact assessment and resolution tracking</li>
</ul>
<h2>Architecture Evolution</h2>
<h3>Current Architecture: <code>.rMemory</code> Perfect Continuity System</h3>
<p>Our advanced memory architecture combines multiple layers for perfect context preservation:</p>
<pre><code>.rMemory/
├── scribes/                    # Specialized analysis tools
│   ├── agent-context-loader.js    # Complete context briefing generator
│   ├── frustration-matrix.js      # Pain point analysis &amp; prevention
│   ├── deep-chat-analysis.js      # Enhanced memory processing
│   └── real-time-analysis.js      # Continuous learning monitor
├── agent-playbooks/            # Project-specific context briefings
│   ├── agent-playbook-hextrackr.md    # HexTrackr project context
│   ├── agent-playbook-stacktrackr.md  # StackTrackr project context
│   └── agent-playbook-new-project.md  # Template for new projects
├── agent-context/              # Generated briefings
│   ├── agent-briefing-YYYY-MM-DD.md   # Daily context briefings
│   └── context-data-YYYY-MM-DD.json   # Structured context data
└── docs/ops/                   # Memory outputs
    ├── frustration-analysis/        # Categorized pain points
    └── live-insights/              # Real-time analysis results
</code></pre>
<h3>Integration with Memento MCP</h3>
<ul>
<li><strong>memento-mcp v0.3.9</strong>: Neo4j-backed MCP server for VS Code</li>
<li><strong>Neo4j Database</strong>: Graph database for storing entities and relationships  </li>
<li><strong>OpenAI Embeddings</strong>: text-embedding-3-small (1536 dimensions) for semantic search</li>
<li><strong>Claude Opus Integration</strong>: Advanced analysis and frustration learning</li>
<li><strong>Docker Environment</strong>: Isolated development container with full memory stack</li>
</ul>
<h3>Perfect Continuity Protocols</h3>
<p>Located in <code>.prompts/</code> folder:</p>
<ul>
<li><strong><code>perfect-continuity-boot.prompt.md</code></strong>: Complete boot protocol for instant context loading</li>
<li><strong><code>perfect-continuity-quick-start.md</code></strong>: Usage guide and example commands</li>
<li><strong><code>agent-project-playbook-v2.prompt.md</code></strong>: Enhanced 7-step workflow with memory integration</li>
</ul>
<h4>How Perfect Continuity Works</h4>
<ol>
<li><strong>Pin Boot Protocol</strong>: Attach <code>perfect-continuity-boot.prompt.md</code> to new chat</li>
<li><strong>Instant Context</strong>: Agent loads recent briefing, searches memory, prevents frustrations</li>
<li><strong>Sprint Awareness</strong>: Immediate knowledge of current phase, priorities, and next steps</li>
<li><strong>Relationship Continuity</strong>: Maintains collaborative tone and working preferences</li>
</ol>
<h2>Perfect Continuity Usage</h2>
<h3>Starting a New Chat Session</h3>
<pre><code class="language-markdown"># Attach: .prompts/perfect-continuity-boot.prompt.md
# Pin it to chat (📌)

Execute Perfect Continuity Boot Protocol.
Load our current project context and sprint status.
</code></pre>
<p><strong>Result</strong>: Instant project awareness with complete context preservation</p>
<h3>Memory Search Patterns</h3>
<p>The system automatically searches for:</p>
<p><strong>Current Status</strong> (Priority 1):</p>
<ul>
<li><code>project:HexTrackr status:current sprint:*</code></li>
<li><code>project:HexTrackr next:* goal:*</code></li>
<li><code>project:HexTrackr phase:* round:*</code></li>
</ul>
<p><strong>Recent Work</strong> (Priority 2):</p>
<ul>
<li><code>project:HexTrackr session:recent</code></li>
<li><code>project:HexTrackr branch:copilot</code></li>
<li><code>project:HexTrackr error:blocking</code></li>
</ul>
<p><strong>Context Expansion</strong> (Priority 3):</p>
<ul>
<li><code>project:HexTrackr roadmap:*</code></li>
<li><code>project:HexTrackr frustration:*</code></li>
<li><code>project:HexTrackr decision:*</code></li>
</ul>
<h3>Agent Context Loading</h3>
<p>Generate comprehensive briefings:</p>
<pre><code class="language-bash"># Generate current project briefing
node .rMemory/scribes/agent-context-loader.js

# Analyze frustration patterns
node .rMemory/scribes/frustration-matrix.js

# Process recent chat logs
node .rMemory/scribes/deep-chat-analysis.js
</code></pre>
<h2>Key Benefits Achieved</h2>
<h3>✅ Perfect Continuity Experience</h3>
<ul>
<li><strong>&quot;Never-ending friendship&quot;</strong>: Every chat feels continuous</li>
<li><strong>Zero context loss</strong>: Complete memory of decisions and solutions</li>
<li><strong>Instant sprint awareness</strong>: Always know current phase and priorities</li>
<li><strong>Frustration prevention</strong>: Never repeat solved problems</li>
</ul>
<h3>✅ Development Acceleration</h3>
<ul>
<li><strong>Reduced onboarding</strong>: New sessions start with full context</li>
<li><strong>Proactive issue prevention</strong>: Learn from past pain points</li>
<li><strong>Consistent architecture</strong>: Reference established patterns and decisions</li>
<li><strong>Quality maintenance</strong>: Memory-driven quality gates and standards</li>
</ul>
<h3>✅ Knowledge Preservation</h3>
<ul>
<li><strong>Complete decision history</strong>: Every architectural choice preserved</li>
<li><strong>Solution library</strong>: Searchable database of solved problems</li>
<li><strong>Communication patterns</strong>: Consistent collaborative relationships</li>
<li><strong>Project evolution</strong>: Full timeline of development progress</li>
</ul>
<p>The memory system uses a graph-based approach:</p>
<pre><code class="language-mermaid">Entity → Properties (name, type, status, confidence, etc.)
Entity → Relationships → Other Entities
Entity → Observations → Time-stamped notes
</code></pre>
<h2>Setup</h2>
<h3>Prerequisites</h3>
<ul>
<li>Docker Desktop installed and running</li>
<li>VS Code with GitHub Copilot</li>
<li>Node.js 18+ for development scripts</li>
</ul>
<h3>Installation</h3>
<ol>
<li><p><strong>Install memento-mcp</strong>:</p>
<pre><code class="language-bash">npm install -g @modelcontextprotocol/create-server
npm install -g memento-mcp
</code></pre>
</li>
<li><p><strong>Configure Docker Neo4j</strong>:</p>
<pre><code class="language-bash">
# Start Neo4j container

docker run -d \
  --name neo4j-dev \
  -p 7474:7474 -p 7687:7687 \
  -e NEO4J_AUTH=neo4j/password \
  neo4j:latest
</code></pre>
</li>
<li><p><strong>Configure VS Code MCP</strong>:</p>
<p>Add to your MCP settings in GitHub Copilot:</p>
<pre><code class="language-json">{
  &quot;memento&quot;: {
    &quot;command&quot;: &quot;memento-mcp&quot;,
    &quot;args&quot;: [&quot;--neo4j-uri&quot;, &quot;bolt://localhost:7687&quot;]
  }
}
</code></pre>
</li>
</ol>
<h2>Memory-First Development Workflow</h2>
<h3>7-Step Protocol</h3>
<ol>
<li><strong>📋 Observe</strong>: Scan current context and identify key information</li>
<li><strong>🎯 Plan</strong>: Design approach using available knowledge and tools</li>
<li><strong>🛡️ Safeguards</strong>: Validate inputs, check constraints, ensure security</li>
<li><strong>⚡ Execute</strong>: Implement solution with proper error handling</li>
<li><strong>✅ Verify</strong>: Test functionality and validate results</li>
<li><strong>🧠 Map</strong>: Update memory with new knowledge and relationships</li>
<li><strong>📝 Log</strong>: Record decisions and outcomes for future reference</li>
</ol>
<h3>Entity Types</h3>
<ul>
<li><strong><code>project_component</code></strong>: Major system components (frontend, backend, etc.)</li>
<li><strong><code>development_process</code></strong>: Workflows, procedures, standards</li>
<li><strong><code>technical_decision</code></strong>: Architecture choices, technology selections</li>
<li><strong><code>agent_memory</code></strong>: Historical knowledge with <code>status:archived</code></li>
</ul>
<h3>Memory Operations</h3>
<h4>Creating Entities</h4>
<pre><code class="language-typescript">// Create a new development process entity
await memento.createEntity({
  name: &quot;Code Review Process&quot;,
  type: &quot;development_process&quot;,
  observations: [&quot;Uses pre-commit hooks&quot;, &quot;Codacy integration required&quot;]
});
</code></pre>
<h4>Searching Knowledge</h4>
<pre><code class="language-typescript">// Find relevant entities
const results = await memento.searchEntities(&quot;security validation&quot;);
</code></pre>
<h4>Managing Relationships</h4>
<pre><code class="language-typescript">// Link related concepts
await memento.createRelation({
  from: &quot;ESLint Configuration&quot;,
  to: &quot;Code Quality&quot;,
  relationType: &quot;enhances&quot;
});
</code></pre>
<h2>Archived vs Current Knowledge</h2>
<h3>Archived Entities</h3>
<ul>
<li>Historical project memories from previous systems</li>
<li>Tagged with <code>status:archived</code> for reference</li>
<li>Searchable but distinguished from current project state</li>
</ul>
<h3>Current Entities</h3>
<ul>
<li>Active project components and processes</li>
<li>Live development knowledge</li>
<li>Real-time relationship mapping</li>
</ul>
<h2>Practical Usage</h2>
<h3>Session Continuity</h3>
<ol>
<li>Start VS Code and activate memento MCP</li>
<li>Query previous session context: &quot;What was I working on last?&quot;</li>
<li>Retrieve relevant technical decisions and progress</li>
<li>Continue development with full context</li>
</ol>
<h3>Knowledge Discovery</h3>
<pre><code class="language-bash">
# Search for security-related knowledge

&quot;Find all entities related to security validation&quot;

# Discover architectural decisions

&quot;Show me technical decisions about database design&quot;

# Find development processes

&quot;What processes do we have for code quality?&quot;
</code></pre>
<h3>Development Session Logging</h3>
<pre><code class="language-bash">
# Record new technical decisions

&quot;Create entity: API Rate Limiting Implementation&quot;

# Link related components

&quot;Connect API Rate Limiting to Security Framework&quot;

# Add observations

&quot;Add observation to ESLint Config: Fixed Node.js environment globals&quot;
</code></pre>
<h2>Integration with HexTrackr</h2>
<h3>Pre-commit Hooks</h3>
<ul>
<li>Memory system validates against known security patterns</li>
<li>Automatic logging of code quality improvements</li>
<li>Cross-reference with existing technical decisions</li>
</ul>
<h3>Documentation Generation</h3>
<ul>
<li>Memory-informed documentation updates</li>
<li>Automatic discovery of new components</li>
<li>Relationship mapping for cross-references</li>
</ul>
<h3>Agent Operations</h3>
<ul>
<li>All AI interactions logged for future reference</li>
<li>Decision rationale preserved</li>
<li>Context continuity across sessions</li>
</ul>
<h2>Troubleshooting</h2>
<h3>Common Issues</h3>
<p><strong>MCP Server Not Available</strong>:</p>
<ol>
<li>Check Docker Neo4j container status</li>
<li>Verify VS Code MCP configuration</li>
<li>Restart VS Code to refresh MCP connections</li>
</ol>
<p><strong>Memory Persistence Issues</strong>:</p>
<ol>
<li>Confirm Neo4j database connectivity</li>
<li>Check memento-mcp service status</li>
<li>Validate environment configuration</li>
</ol>
<p><strong>Search Performance</strong>:</p>
<ol>
<li>Ensure embeddings are generated</li>
<li>Check Neo4j index status</li>
<li>Monitor database query performance</li>
</ol>
<h3>Diagnostic Commands</h3>
<pre><code class="language-bash">
# Check Docker containers

docker ps | grep neo4j

# Test Neo4j connectivity

docker exec -it neo4j-dev cypher-shell -u neo4j -p password

# Verify memento installation

npm list -g | grep memento-mcp
</code></pre>
<h2>Best Practices</h2>
<h3>Entity Naming</h3>
<ul>
<li>Use clear, descriptive names</li>
<li>Follow consistent naming conventions</li>
<li>Include context for disambiguation</li>
</ul>
<h3>Relationship Types</h3>
<ul>
<li>Use meaningful relationship labels</li>
<li>Create bidirectional connections where appropriate</li>
<li>Document relationship semantics</li>
</ul>
<h3>Observation Quality</h3>
<ul>
<li>Include timestamps and context</li>
<li>Reference specific files or commits</li>
<li>Note decision rationale</li>
</ul>
<h3>Archive Management</h3>
<ul>
<li>Regularly review and tag outdated entities</li>
<li>Maintain clear separation between historical and current knowledge</li>
<li>Preserve valuable historical context for reference</li>
</ul>
<h2>Temporary Development Enhancements</h2>
<h3>memento-protocol-enhanced Wrapper (Development Only)</h3>
<p><strong>Purpose</strong>: Enhanced memory capabilities during development phase, easily removable before shipping.</p>
<p><strong>Status</strong>: Available in separate repository: <code>lbruton/memento-protocol-enhanced</code></p>
<h4>Features Added</h4>
<ul>
<li><strong>Protocol Engine</strong>: YAML-based rule enforcement outside LLM control</li>
<li><strong>Quality Management</strong>: Confidence scoring, freshness decay, deduplication</li>
<li><strong>Enhanced Search</strong>: Hybrid strategies (semantic + keyword + temporal + confidence)</li>
<li><strong>Synthesis Reporting</strong>: &quot;Ask the Scribe&quot; functionality for memory insights</li>
</ul>
<h4>Integration Approach</h4>
<pre><code class="language-bash">
# Install wrapper as development dependency

npm install --save-dev memento-protocol-enhanced

# Configure as optional MCP server

# Add to VS Code MCP settings (development profile only):

{
  &quot;memento-enhanced&quot;: {
    &quot;command&quot;: &quot;node&quot;,
    &quot;args&quot;: [&quot;./node_modules/memento-protocol-enhanced/src/index.js&quot;],
    &quot;env&quot;: {
      &quot;MEMENTO_WRAPPER_MODE&quot;: &quot;development&quot;,
      &quot;FALLBACK_TO_STANDARD&quot;: &quot;true&quot;
    }
  }
}
</code></pre>
<h4>Easy Removal Strategy</h4>
<ol>
<li><strong>Development Dependency</strong>: Installed as <code>devDependency</code>, not shipped in production</li>
<li><strong>Graceful Fallbacks</strong>: Wrapper automatically falls back to standard memento-mcp if unavailable</li>
<li><strong>Separate Configuration</strong>: Uses dedicated MCP server entry, easily removed</li>
<li><strong>No Data Lock-in</strong>: All data remains in standard memento-mcp format</li>
<li><strong>Clean Uninstall</strong>: Simple <code>npm uninstall</code> and MCP config removal</li>
</ol>
<h4>Benefits for Development</h4>
<ul>
<li><strong>Enhanced Search</strong>: Better context retrieval during development</li>
<li><strong>Quality Control</strong>: Automatic confidence scoring and memory cleanup</li>
<li><strong>Protocol Enforcement</strong>: Consistent memory operations (backup-before-write, etc.)</li>
<li><strong>Debugging</strong>: Synthesis reports help understand memory state</li>
</ul>
<h4>Shipping Preparation</h4>
<pre><code class="language-bash">
# Remove wrapper before shipping

npm uninstall memento-protocol-enhanced

# Remove from MCP configuration

# (delete memento-enhanced section from VS Code settings)

# Standard memento-mcp continues working unchanged
</code></pre>
<h2>Future Enhancements</h2>
<h3>Planned Features</h3>
<ul>
<li>Automated entity discovery from code changes</li>
<li>Integration with GitHub commit messages</li>
<li>Enhanced semantic search with local LLM models</li>
<li>Automated relationship inference</li>
</ul>
<h3>Extension Opportunities</h3>
<ul>
<li>Custom entity types for specific domains</li>
<li>Workflow automation based on memory patterns</li>
<li>Integration with external knowledge sources</li>
<li>Advanced analytics and knowledge visualization</li>
</ul>
<h2>Related Documentation</h2>
<ul>
<li><a href="../agents/AGENTS.md">Agent Operations Guide</a></li>
<li><a href="dev-environment.md">Development Environment Setup</a></li>
<li><a href="pre-commit-hooks.md">Pre-commit Hooks</a></li>
<li><a href="../adr/">Architecture Decision Records</a></li>
</ul>
<h2>References</h2>
<ul>
<li><a href="https://github.com/modelcontextprotocol/servers/tree/main/src/memento">memento-mcp Documentation</a></li>
<li><a href="https://neo4j.com/docs/">Neo4j Documentation</a></li>
<li><a href="https://modelcontextprotocol.io/">Model Context Protocol Specification</a></li>
</ul>

    <!-- Note: This file is intentionally minimal. The full page scaffold, header, footer, and scripts
             are provided by docs-html/index.html. Content generated using this template will be
             fetched and injected into #content-container by docs-html/js/docs-portal-v2.js. -->
</section>
